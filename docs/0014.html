<html>
<head>
<title>How to deploy a MongoDB Replica Set using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² MongoDB å‰¯æœ¬é›†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/how-to-deploy-a-mongodb-replica-set-using-docker-6d0b9ac00e49?source=collection_archive---------0-----------------------#2017-01-15">https://towardsdatascience.com/how-to-deploy-a-mongodb-replica-set-using-docker-6d0b9ac00e49?source=collection_archive---------0-----------------------#2017-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/0780a1170885b26d7ac53bf993d7ba48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*8X_CcO9QW_HspoTFvIVfHA.png"/></div></figure><h1 id="fc1d" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">æ–‡ç« å·²æ›´æ–°</h1><p id="cfcc" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">æˆ‘å†™äº†ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨ DevOps æ—¶å°šé£æ ¼éƒ¨ç½² mongodb é›†ç¾¤çš„æ–°æ–‡ç« ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† Terraformã€Ansibleã€Packer å’Œæ›´å¤šå¾ˆé…·çš„æŠ€æœ¯ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨é˜…è¯»å®ƒã€‚</p><div class="lq lr gp gr ls lt"><a href="https://medium.com/@cramirez92/deploy-a-mongodb-replica-set-in-a-devops-fashion-style-infrastructre-as-code-f631d7a0ad80" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">ä»¥ DevOps æ–¹å¼éƒ¨ç½² MongoDB å‰¯æœ¬é›†(ä½œä¸ºä»£ç çš„åŸºç¡€æ¶æ„)</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">ä»‹ç»</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh js lt"/></div></div></a></div></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="01ee" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ docker è®¾ç½®å¸¦èº«ä»½éªŒè¯çš„ MongoDB å‰¯æœ¬é›†ã€‚</p><p id="ce8e" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æœ¬æ–‡ä¸­æˆ‘ä»¬å°†ä½¿ç”¨çš„æ˜¯:</p><ul class=""><li id="f4a4" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp mz na nb nc bi translated">MongoDB 3.4.1</li><li id="c3d0" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">Mac docker 1 . 12 . 6</li></ul><h1 id="d1e4" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">å‰¯æœ¬é›†çš„ä½“ç³»ç»“æ„</h1><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9ddd91c084e80f60469727a66b89bf5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*V2X99_tnwj6kltZiZEYv7Q.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk">MongoDB Replica Set</figcaption></figure><h1 id="81a5" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">ç”¨ docker æ„å»ºæˆ‘ä»¬çš„å‰¯æœ¬é›†</h1><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/e752849c03efad35c1255de98208e6e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*W3hJmVyfUFvolUowVDlBkA.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk">Servers Distribution using Docker</figcaption></figure><p id="afb7" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç”¨ docker è®¾ç½®çš„å¤åˆ¶ç»“æœã€‚</p><h2 id="ffb6" class="nw jv iq bd jw nx ny dn ka nz oa dp ke ld ob oc ki lh od oe km ll of og kq oh bi translated">#å…ˆå†³æ¡ä»¶</h2><ul class=""><li id="2b46" class="mu mv iq ku b kv kw kz la ld oi lh oj ll ok lp mz na nb nc bi translated"><strong class="ku ir">ç å¤´å·¥äºº</strong>çš„åŸºç¡€çŸ¥è¯†</li><li id="a020" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><strong class="ku ir">å¯¹æ¥æœº</strong>å’Œ<strong class="ku ir">å¯¹æ¥æœº</strong>å®‰è£…å®Œæ¯•</li><li id="bdb7" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><strong class="ku ir"> mongoDB </strong>ä¸­çš„åŸºç¡€çŸ¥è¯†</li><li id="165f" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><strong class="ku ir"> bash è„šæœ¬çš„åŸºç¡€çŸ¥è¯†</strong></li></ul><p id="259d" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¦‚æœä½ åœ¨ Mac æˆ– Windows ä¸Šï¼Œè€ƒè™‘ä½¿ç”¨è™šæ‹Ÿæœºã€‚æˆ‘å°†åœ¨ MacOS Sierra ä¸Šä½¿ç”¨ VirtualBox æ¥è¿è¡Œæˆ‘ä»¬çš„ mongoDB å®ä¾‹ã€‚</p><h1 id="2490" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">#æ­¥éª¤ 1 â€”åˆ›å»ºæˆ‘ä»¬çš„ 3 å°å¯¹æ¥æœº</h1><p id="9c16" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">è¦åˆ›å»º docker æœºå™¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»ˆç«¯ä¸­å‘å‡ºä¸‹ä¸€æ¡å‘½ä»¤:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="0c54" class="nw jv iq om b gy oq or l os ot">$ docker-machine create -d virtualbox manager1</span></pre><p id="7024" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¿™ä¸ªå‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªåä¸º<strong class="ku ir"> manager1 </strong>çš„æœºå™¨ï¼Œä½¿ç”¨<strong class="ku ir"> virtualbox </strong>ä½œä¸ºæˆ‘ä»¬çš„è™šæ‹ŸåŒ–æä¾›è€…ã€‚</p><p id="5330" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå·¦<code class="fe ou ov ow om b">docker-machine</code></p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="3c0e" class="nw jv iq om b gy oq or l os ot">$ docker-machine create -d virtualbox worker1</span><span id="44e5" class="nw jv iq om b gy ox or l os ot">$ docker-machine create -d virtualbox worker2</span></pre><p id="9e83" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¦éªŒè¯æˆ‘ä»¬çš„æœºå™¨æ˜¯å¦å·²åˆ›å»ºï¼Œè®©æˆ‘ä»¬è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="55bd" class="nw jv iq om b gy oq or l os ot">$ docker-machine ls</span><span id="df69" class="nw jv iq om b gy ox or l os ot">// the result will be<br/>NAME    ACTIVE   DRIVER     STATE     URL    <br/>manager1   -   virtualbox   Running  tcp://192.168.99.100:2376           <br/>worker1    -   virtualbox   Running  tcp://192.168.99.101:2376<br/>worker2    -   virtualbox   Running  tcp://192.168.99.102:2376</span></pre><h1 id="71c4" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">#æ­¥éª¤ MongoDB ä¸»èŠ‚ç‚¹çš„é…ç½®</h1><p id="ca38" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸‰å°æœºå™¨ï¼Œè®©æˆ‘ä»¬å°†å®ƒæ”¾åœ¨ç¬¬ä¸€å°æœºå™¨<strong class="ku ir">ä¸Šï¼Œå¼€å§‹ mongodb é…ç½®ï¼Œè®©æˆ‘ä»¬è¿è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤:</strong></p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="63c4" class="nw jv iq om b gy oq or l os ot">$ eval `docker-machine env manager1`</span></pre><p id="25df" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">åœ¨åˆ›å»ºæˆ‘ä»¬çš„ mongoDB å®¹å™¨ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ä¸»é¢˜å·²ç»åœ¨<strong class="ku ir"> docker å®¹å™¨</strong>ä¸­å›´ç»•<strong class="ku ir">æ•°æ®åº“æŒä¹…æ€§</strong>è®¨è®ºäº†å¾ˆä¹…ï¼Œä¸ºäº†å®ç°è¿™ä¸ªæŒ‘æˆ˜ï¼Œæˆ‘ä»¬å°†è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª<strong class="ku ir"> docker å·</strong>ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="5e9d" class="nw jv iq om b gy oq or l os ot">$ docker volume create --name mongo_storage</span></pre><p id="5d75" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨è®©æˆ‘ä»¬é™„åŠ æˆ‘ä»¬åˆ›å»ºçš„å·æ¥å¯åŠ¨æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª mongo å®¹å™¨å¹¶è®¾ç½®é…ç½®ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="c2f1" class="nw jv iq om b gy oq or l os ot">$ docker run --name mongoNode1 \<br/>-v mongo_storage:/data \<br/>-d mongo \<br/>--smallfiles</span></pre><p id="66cc" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆ›å»º<strong class="ku ir">å¯†é’¥æ–‡ä»¶ã€‚</strong></p><blockquote class="oy oz pa"><p id="8652" class="ks kt pb ku b kv mp kx ky kz mq lb lc pc mr lf lg pd ms lj lk pe mt ln lo lp ij bi translated">å¯†é’¥æ–‡ä»¶çš„å†…å®¹ä½œä¸ºå‰¯æœ¬é›†æˆå‘˜çš„å…±äº«å¯†ç ã€‚å¯¹äºå‰¯æœ¬é›†çš„æ‰€æœ‰æˆå‘˜ï¼Œå¯†é’¥æ–‡ä»¶çš„å†…å®¹å¿…é¡»ç›¸åŒã€‚</p></blockquote><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="4ca2" class="nw jv iq om b gy oq or l os ot">$ openssl rand -base64 741 &gt; mongo-keyfile<br/>$ chmod 600 mongo-keyfile</span></pre><p id="4e8f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨äºä¿å­˜<strong class="ku ir"> mongo_storage </strong>å·ä¸­çš„æ•°æ®ã€å¯†é’¥æ–‡ä»¶å’Œé…ç½®:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="40f9" class="nw jv iq om b gy oq or l os ot">$ docker exec mongoNode1 bash -c 'mkdir /data/keyfile /data/admin'</span></pre><p id="3b00" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€äº›ç®¡ç†å‘˜ç”¨æˆ·ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<strong class="ku ir"> admin.js </strong>å’Œä¸€ä¸ª<strong class="ku ir"> replica.js </strong>æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="f463" class="nw jv iq om b gy oq or l os ot">// admin.js</span><span id="ffd8" class="nw jv iq om b gy ox or l os ot">admin = db.getSiblingDB("admin")</span><span id="4002" class="nw jv iq om b gy ox or l os ot">// creation of the admin user<br/>admin.createUser(<br/>  {<br/>    user: "cristian",<br/>    pwd: "cristianPassword2017",<br/>    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]<br/>  }<br/>)</span><span id="8393" class="nw jv iq om b gy ox or l os ot">// let's authenticate to create the other user<br/>db.getSiblingDB("admin").auth("cristian", "cristianPassword2017" )</span><span id="220f" class="nw jv iq om b gy ox or l os ot">// creation of the replica set admin user<br/>db.getSiblingDB("admin").createUser(<br/>  {<br/>    "user" : "replicaAdmin",<br/>    "pwd" : "replicaAdminPassword2017",<br/>    roles: [ { "role" : "clusterAdmin", "db" : "admin" } ]<br/>  }<br/>)</span></pre></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><pre class="ol om on oo aw op bi"><span id="498c" class="nw jv iq om b gy pg ph pi pj pk or l os ot">//replica.js</span><span id="518d" class="nw jv iq om b gy ox or l os ot">rs.initiate({<br/> _id: 'rs1',<br/> members: [{<br/>  _id: 0, host: 'manager1:27017'<br/> }]<br/>})</span></pre><h2 id="4e0b" class="nw jv iq bd jw nx ny dn ka nz oa dp ke ld ob oc ki lh od oe km ll of og kq oh bi translated"><strong class="ak">é‡è¦</strong></h2><blockquote class="oy oz pa"><p id="4067" class="ks kt pb ku b kv mp kx ky kz mq lb lc pc mr lf lg pd ms lj lk pe mt ln lo lp ij bi translated">å¯†ç åº”è¯¥æ˜¯éšæœºçš„ã€é•¿çš„å’Œå¤æ‚çš„ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿå®‰å…¨å¹¶é˜²æ­¢æˆ–å»¶è¿Ÿæ¶æ„è®¿é—®ã€‚å‚è§<a class="ae pf" href="https://docs.mongodb.com/manual/reference/built-in-roles/#database-user-roles" rel="noopener ugc nofollow" target="_blank">æ•°æ®åº“ç”¨æˆ·è§’è‰²</a>äº†è§£å†…ç½®è§’è‰²ä»¥åŠä¸æ•°æ®åº“ç®¡ç†æ“ä½œç›¸å…³çš„å®Œæ•´åˆ—è¡¨ã€‚</p></blockquote><p id="14fb" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æˆ‘ä»¬æ‰€åšçš„ç›´åˆ°çŸ¥é“:</p><ul class=""><li id="bac2" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp mz na nb nc bi translated">åˆ›å»ºäº†<strong class="ku ir"> mongo_storage </strong>ï¼Œdocker å·ã€‚</li><li id="1d8e" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">åˆ›å»ºäº†<strong class="ku ir"> mongo-keyfile </strong>ï¼Œopenssl å¯†é’¥ç”Ÿæˆã€‚</li><li id="f2f7" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">åˆ›å»ºäº†<strong class="ku ir"> admin.js æ–‡ä»¶</strong>ï¼Œç®¡ç† mongoDB çš„ç”¨æˆ·ã€‚</li><li id="32fd" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">åˆ›å»ºäº†<strong class="ku ir"> replica.js æ–‡ä»¶</strong>ï¼Œä»¥åˆå§‹åŒ–å‰¯æœ¬é›†ã€‚</li></ul><p id="8df9" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¥½äº†ï¼Œè®©æˆ‘ä»¬ç»§ç»­å°†æ–‡ä»¶ä¼ é€’åˆ°å®¹å™¨ä¸­ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="0f3c" class="nw jv iq om b gy oq or l os ot">$ docker cp admin.js mongoNode1:/data/admin/</span><span id="4ec2" class="nw jv iq om b gy ox or l os ot">$ docker cp replica.js mongoNode1:/data/admin/</span><span id="87f3" class="nw jv iq om b gy ox or l os ot">$ docker cp mongo-keyfile mongoNode1:/data/keyfile/</span></pre></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><pre class="ol om on oo aw op bi"><span id="d8f0" class="nw jv iq om b gy pg ph pi pj pk or l os ot">// change folder owner to the user container</span><span id="e652" class="nw jv iq om b gy ox or l os ot">$ docker exec mongoNode1 bash -c 'chown -R mongodb:mongodb /data'</span></pre><p id="18be" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æˆ‘ä»¬æ‰€åšçš„æ˜¯å°†éœ€è¦çš„æ–‡ä»¶ä¼ é€’ç»™å®¹å™¨ï¼Œç„¶å<strong class="ku ir">å°†</strong><strong class="ku ir"/><strong class="ku ir">/æ•°æ®æ–‡ä»¶å¤¹æ‰€æœ‰è€…</strong> <strong class="ku ir">æ›´æ”¹ä¸ºå®¹å™¨ç”¨æˆ·</strong>ï¼Œå› ä¸ºå®¹å™¨ç”¨æˆ·æ˜¯éœ€è¦è®¿é—®è¯¥æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ç”¨æˆ·ã€‚</p><p id="8aa9" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨ä¸€åˆ‡éƒ½å·²ç»è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬å‡†å¤‡ç”¨å‰¯æœ¬é›†é…ç½®é‡æ–°å¯åŠ¨ mongod å®ä¾‹ã€‚</p><p id="59cd" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">åœ¨æˆ‘ä»¬å¼€å§‹éªŒè¯ mongo å®¹å™¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code class="fe ou ov ow om b">env</code>æ–‡ä»¶æ¥è®¾ç½®æˆ‘ä»¬çš„ç”¨æˆ·å’Œå¯†ç ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="82da" class="nw jv iq om b gy oq or l os ot">MONGO_USER_ADMIN=cristian<br/>MONGO_PASS_ADMIN=cristianPassword2017</span><span id="c11d" class="nw jv iq om b gy ox or l os ot">MONGO_REPLICA_ADMIN=replicaAdmin<br/>MONGO_PASS_REPLICA=replicaAdminPassword2017</span></pre><p id="17ad" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ç§»é™¤å®¹å™¨å¹¶å¼€å§‹ä¸€ä¸ªæ–°çš„ã€‚ä¸ºä»€ä¹ˆï¼Ÿï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æä¾›å‰¯æœ¬é›†å’Œèº«ä»½éªŒè¯å‚æ•°ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="4b61" class="nw jv iq om b gy oq or l os ot">// first let's remove our container</span><span id="9a50" class="nw jv iq om b gy ox or l os ot">$ docker rm -f mongoNode1</span><span id="c8ce" class="nw jv iq om b gy ox or l os ot">// now lets start our container with authentication </span><span id="b523" class="nw jv iq om b gy ox or l os ot">$ docker run --name mongoNode1 --hostname mongoNode1 \<br/>-v mongo_storage:/data \<br/>--env-file env \<br/>--add-host manager1:192.168.99.100 \<br/>--add-host worker1:192.168.99.101 \<br/>--add-host worker2:192.168.99.102 \<br/>-p 27017:27017 \<br/>-d mongo --smallfiles \<br/>--keyFile /data/keyfile/mongo-keyfile \<br/>--replSet 'rs1' \<br/>--storageEngine wiredTiger \<br/>--port 27017</span></pre><p id="116c" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¿™æ˜¯æ€ä¹ˆå›äº‹â€¦ğŸ¤”è¿™ä¼¼ä¹æ˜¯å¯¹æ——å¸œçš„æ»¥ç”¨ã€‚</p><p id="8dc4" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è®©æˆ‘åˆ†ä¸¤éƒ¨åˆ†å‘ä½ è§£é‡Š:</p><p id="718c" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated"><strong class="ku ir">ç å¤´æ ‡å¿—:</strong></p><ol class=""><li id="e7da" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp pl na nb nc bi translated"><code class="fe ou ov ow om b">--env-file</code>è¯»å–ä¸€ä¸ª env æ–‡ä»¶å¹¶åœ¨å®¹å™¨ä¸­è®¾ç½®<code class="fe ou ov ow om b">environment</code>å˜é‡ã€‚</li><li id="5698" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp pl na nb nc bi translated"><code class="fe ou ov ow om b">--add-host</code>æ ‡å¿—å°†æ¡ç›®æ·»åŠ åˆ° docker å®¹å™¨çš„<code class="fe ou ov ow om b">/etc/hosts</code>æ–‡ä»¶ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸»æœºåè€Œä¸æ˜¯ IP åœ°å€ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ­£åœ¨æ˜ å°„æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ 3 å° docker-machineã€‚</li></ol><p id="1c20" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¦æ›´æ·±å…¥åœ°ç†è§£<em class="pb"> docker è¿è¡Œå‘½ä»¤</em>ã€<a class="ae pf" href="https://docs.docker.com/engine/reference/run/" rel="noopener ugc nofollow" target="_blank">è¯·é˜…è¯» docker çš„æ–‡æ¡£</a>ã€‚</p><p id="685f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated"><strong class="ku ir">è’™å“¥æ——å¸œ:</strong></p><p id="725b" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä¸ºäº†è®¾ç½® mongo å‰¯æœ¬é›†ï¼Œæˆ‘ä»¬éœ€è¦å„ç§ mongo æ ‡å¿—</p><ol class=""><li id="00c8" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp pl na nb nc bi translated"><code class="fe ou ov ow om b">--keyFile</code>è¿™ä¸ªæ ‡å¿—æ˜¯ç”¨æ¥å‘Šè¯‰ mongoã€‘åœ¨å“ªé‡Œ</li><li id="5cf9" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp pl na nb nc bi translated"><code class="fe ou ov ow om b">--replSet</code>è¯¥æ ‡å¿—ç”¨äºè®¾ç½®å‰¯æœ¬é›†çš„åç§°ã€‚</li><li id="aea1" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp pl na nb nc bi translated"><code class="fe ou ov ow om b">--storageEngine</code>è¯¥æ ‡å¿—ç”¨äºè®¾ç½® mongoDB çš„å¼•æ“ï¼Œä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸º<strong class="ku ir"> mongoDB 3.4.1 </strong>çš„é»˜è®¤å¼•æ“æ˜¯<strong class="ku ir"> wiredTigerã€‚</strong></li></ol><p id="db05" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä¸ºäº†æ›´æ·±å…¥åœ°äº†è§£ mongo å‰¯æœ¬é›†ï¼Œ<a class="ae pf" href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set/" rel="noopener ugc nofollow" target="_blank">é˜…è¯» MongoDB æ–‡æ¡£</a>ï¼Œæˆ‘ä¹Ÿæ¨è<a class="ae pf" href="https://university.mongodb.com/?next=/courses/MongoDB/M101JS/2016_March/courseware/Week_2_CRUD/5695578bd8ca393adc3abe54" rel="noopener ugc nofollow" target="_blank">mongou å¤§å­¦çš„è¯¾ç¨‹</a>æ¥å­¦ä¹ å…³äºè¿™ä¸ªä¸»é¢˜çš„æ›´å¤šå†…å®¹ã€‚</p><p id="e127" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">mongoNode1 å®¹å™¨çš„æœ€åä¸€æ­¥æ˜¯å¯åŠ¨å‰¯æœ¬é›†ï¼Œæˆ‘ä»¬å°†é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆè¿™ä¸€æ­¥:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="446a" class="nw jv iq om b gy oq or l os ot">$ docker exec mongoNode1 bash -c 'mongo &lt; /data/admin/replica.js'</span></pre><p id="294f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="18fe" class="nw jv iq om b gy oq or l os ot">MongoDB shell version v3.4.1<br/>connecting to: mongodb://127.0.0.1:27017<br/>MongoDB server version: 3.4.1<br/>{ "ok" : 1 }<br/>bye</span></pre><p id="43dd" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="d64d" class="nw jv iq om b gy oq or l os ot">$ docker exec mongoNode1 bash -c 'mongo &lt; /data/admin/admin.js'</span></pre><p id="251e" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="d8d9" class="nw jv iq om b gy oq or l os ot">MongoDB shell version v3.4.1<br/>connecting to: mongodb://127.0.0.1:27017<br/>MongoDB server version: 3.4.1<br/>admin<br/>Successfully added user: {<br/> "user" : "cristian",<br/> ...<br/>Successfully added user: {<br/> "user" : "replicaAdmin",<br/>...<br/>bye</span></pre><p id="f209" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨ï¼Œè¦è¿›å…¥å¤åˆ¶å‰¯æœ¬ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="c60e" class="nw jv iq om b gy oq or l os ot">$ docker exec -it mongoNode1 bash -c 'mongo -u $MONGO_REPLICA_ADMIN -p $MONGO_PASS_REPLICA --eval "rs.status()" --authenticationDatabase "admin"'</span></pre><p id="4870" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä½ åº”è¯¥å‡†å¤‡å¥½çœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="946d" class="nw jv iq om b gy oq or l os ot">MongoDB shell version v3.4.1<br/>connecting to: mongodb://127.0.0.1:27017<br/>MongoDB server version: 3.4.1<br/>{<br/> "set" : "rs1",<br/> ...<br/> "members" : [<br/>  {<br/>   "_id" : 0,<br/>   "name" : "manager1:27017",<br/>   ...<br/> "ok" : 1<br/>}</span></pre><h1 id="198a" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">#æ­¥éª¤ 3â€”â€”å†æ·»åŠ  2 ä¸ª mongo èŠ‚ç‚¹å®¹å™¨</h1><p id="aaed" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">ç°åœ¨ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬å†å¯åŠ¨ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒä»¬åŠ å…¥å‰¯æœ¬é›†ã€‚</p><p id="533f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¦æ·»åŠ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©æˆ‘ä»¬åˆ‡æ¢åˆ°<strong class="ku ir"> worker1 </strong> docker æœºå™¨ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æœ¬åœ°è®¡ç®—æœºï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="34fd" class="nw jv iq om b gy oq or l os ot">eval `docker-machine env worker1`</span></pre><p id="2f6f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¦‚æœä½ æ²¡æœ‰åœ¨æœ¬åœ°è¿è¡Œï¼Œåªè¦æŠŠä½ çš„ç»ˆç«¯æŒ‡å‘ä¸‹ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p><p id="8d89" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬è¦é‡å¤æˆ‘ä»¬ä¸º<strong class="ku ir"> mongoNode1 </strong>æ‰€åšçš„å‡ ä¹æ‰€æœ‰æ­¥éª¤ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥è¿è¡Œæˆ‘ä»¬æ‰€æœ‰çš„å‘½ä»¤ã€‚</p><p id="cc46" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º<strong class="ku ir"> create-replica-set.sh </strong>çš„æ–‡ä»¶ï¼Œçœ‹çœ‹å¦‚ä½•ç»„æˆ<strong class="ku ir"> main </strong>å‡½æ•°:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="cde6" class="nw jv iq om b gy oq or l os ot">function main {<br/>  init_mongo_primary<br/>  init_mongo_secondaries<br/>  add_replicas manager1 mongoNode1<br/>  check_status manager1 mongoNode1<br/>}</span><span id="fffa" class="nw jv iq om b gy ox or l os ot">main</span></pre><p id="7bc3" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨è®©æˆ‘å‘æ‚¨å±•ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•ç»„æˆ:</p><p id="4270" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated"><strong class="ku ir">åˆå§‹åŒ– MONGO ä¸»å‡½æ•°</strong></p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="1af4" class="nw jv iq om b gy oq or l os ot">function init_mongo_primary {<br/>  # <a class="ae pf" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a> name-of-keyfile<br/>  createKeyFile mongo-keyfile<br/>  <br/>  # <a class="ae pf" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a> server container volume<br/>  createMongoDBNode manager1 mongoNode1 mongo_storage<br/>  <br/>  # <a class="ae pf" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a> container<br/>  init_replica_set mongoNode1<br/>}</span></pre><p id="a6a0" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¿™ä¸ªå‡½æ•°å†…éƒ¨ä¹Ÿæœ‰å‡½æ•°è°ƒç”¨ï¼Œæ²¡æœ‰æ–°çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹åˆ°äº†æ‰€æœ‰çš„åŠŸèƒ½ï¼Œè®©æˆ‘æ¥æè¿°ä¸€ä¸‹å®ƒçš„åŠŸèƒ½:</p><ol class=""><li id="c6d8" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp pl na nb nc bi translated">ä¸º<strong class="ku ir">å‰¯æœ¬é›†éªŒè¯åˆ›å»º<strong class="ku ir">å¯†é’¥æ–‡ä»¶</strong>ã€‚</strong></li><li id="9d82" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp pl na nb nc bi translated">åˆ›å»ºä¸€ä¸ª mongodb å®¹å™¨ï¼Œå¹¶æ¥æ”¶ 2 ä¸ªå‚æ•°:a)å°†è¦å®šä½çš„æœåŠ¡å™¨ï¼Œb)å®¹å™¨çš„åç§°ï¼Œdocker å·çš„åç§°ï¼Œæ‰€æœ‰è¿™äº›åŠŸèƒ½æˆ‘ä»¬ä»¥å‰éƒ½è§è¿‡ã€‚</li><li id="f096" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp pl na nb nc bi translated">æœ€åï¼Œå®ƒå°†ä»¥ä¸æˆ‘ä»¬ä¹‹å‰å®Œå…¨ç›¸åŒçš„æ­¥éª¤å¯åŠ¨å¤åˆ¶å‰¯æœ¬ã€‚</li></ol><p id="0a11" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated"><strong class="ku ir">åˆå§‹åŒ– MONGO è¾…åŠ©åŠŸèƒ½</strong></p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="f74a" class="nw jv iq om b gy oq or l os ot">function init_mongo_secondaries {<br/>  # <a class="ae pf" href="http://twitter.com/Params" rel="noopener ugc nofollow" target="_blank">@Params</a> server container volume<br/>  createMongoDBNode worker1 mongoNode1 mongo_storage<br/>  createMongoDBNode worker2 mongoNode2 mongo_storage<br/>}</span></pre><p id="04de" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯<strong class="ku ir">ä¸ºå‰¯æœ¬é›†</strong>åˆ›å»ºå¦å¤–ä¸¤ä¸ª mongo å®¹å™¨ï¼Œå¹¶æ‰§è¡Œä¸ mongoNode1 ç›¸åŒçš„æ­¥éª¤ï¼Œä½†è¿™é‡Œæˆ‘ä»¬ä¸åŒ…æ‹¬å‰¯æœ¬é›†å®ä¾‹åŒ–å’Œç®¡ç†å‘˜ç”¨æˆ·åˆ›å»ºï¼Œå› ä¸ºè¿™äº›éƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå‰¯æœ¬é›†å°†ä¸å‰¯æœ¬é›†çš„æ‰€æœ‰èŠ‚ç‚¹å…±äº«æ•°æ®åº“é…ç½®ï¼Œç¨åå®ƒä»¬å°†è¢«æ·»åŠ åˆ°ä¸»æ•°æ®åº“ã€‚</p><h2 id="2838" class="nw jv iq bd jw nx ny dn ka nz oa dp ke ld ob oc ki lh od oe km ll of og kq oh bi translated"><strong class="ak">æ·»åŠ å‰¯æœ¬åŠŸèƒ½</strong></h2><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="4036" class="nw jv iq om b gy oq or l os ot"># <a class="ae pf" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a> server container<br/>function add_replicas {<br/>  echo 'Â·Â· adding replicas &gt;&gt;&gt;&gt; '$1' Â·Â·'</span><span id="62fe" class="nw jv iq om b gy ox or l os ot">  switchToServer $1<br/>  <br/>  for server in worker1 worker2<br/>   do<br/>    rs="rs.add('$server:27017')"<br/>    add='mongo --eval "'$rs'" -u $MONGO_REPLICA_ADMIN <br/>         -p $MONGO_PASS_REPLICA --authenticationDatabase="admin"'<br/>    sleep 2<br/>    wait_for_databases $server<br/>    docker exec -i $2 bash -c "$add"<br/>  done<br/>}</span></pre><p id="f5be" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ­£åœ¨åšçš„æ˜¯ï¼Œæœ€åå°†å¦å¤– 2 ä¸ª mongo å®¹å™¨æ·»åŠ åˆ°<strong class="ku ir">å‰¯æœ¬é›†é…ç½®ä¸Šçš„<strong class="ku ir">ä¸»æ•°æ®åº“</strong>ä¸­ï¼Œ</strong>é¦–å…ˆï¼Œæˆ‘ä»¬å¾ªç¯é€šè¿‡å‰©ä½™çš„æœºå™¨æ¥æ·»åŠ å®¹å™¨ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å‡†å¤‡é…ç½®ï¼Œç„¶åæˆ‘ä»¬æ£€æŸ¥å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨å‡½æ•°<code class="fe ou ov ow om b">wait_for_databases</code>æ¥å®Œæˆï¼Œæˆ‘ä»¬å°†æœºå™¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™ checkï¼Œç„¶åæˆ‘ä»¬åœ¨ä¸»æ•°æ®åº“ä¸­æ‰§è¡Œé…ç½®ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°è¿™æ ·çš„æ¶ˆæ¯:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="339b" class="nw jv iq om b gy oq or l os ot">MongoDB shell version v3.4.1<br/>connecting to: mongodb://127.0.0.1:27017<br/>MongoDB server version: 3.4.1<br/>{ "ok" : 1 }</span></pre><p id="1902" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">è¿™æ„å‘³ç€ mongo å®¹å™¨è¢«æˆåŠŸåœ°æ·»åŠ åˆ°äº†å‰¯æœ¬ä¸­ã€‚</p><p id="22b2" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æœ€åï¼Œæˆ‘ä»¬ç”¨ main ä¸­çš„æœ€åä¸€ä¸ªå‡½æ•°æ£€æŸ¥å‰¯æœ¬é›†çš„çŠ¶æ€:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="e4ab" class="nw jv iq om b gy oq or l os ot"># <a class="ae pf" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a> server container<br/>function check_status {<br/>  switchToServer $1<br/>  cmd='mongo -u $MONGO_REPLICA_ADMIN -p $MONGO_PASS_REPLICA <br/>        --eval "rs.status()" --authenticationDatabase "admin"'<br/>  docker exec -i $2 bash -c "$cmd"<br/>}</span></pre><p id="68e1" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–è„šæœ¬çš„åŠŸèƒ½ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“å°†è¦è¿™æ ·åšï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™æ‰§è¡Œè‡ªåŠ¨åŒ– bash è„šæœ¬äº†ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><blockquote class="oy oz pa"><p id="56a6" class="ks kt pb ku b kv mp kx ky kz mq lb lc pc mr lf lg pd ms lj lk pe mt ln lo lp ij bi translated">æ³¨æ„å¦‚æœä½ å·²ç»å®Œæˆäº†ä¸Šé¢çš„æ‰€æœ‰æ­¥éª¤ï¼Œä½ éœ€è¦é‡ç½®æˆ‘ä»¬å·²ç»å®ç°çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä»¥é¿å…ä»»ä½•å†²çªåç§°é—®é¢˜ï¼Œé‡ç½®é…ç½®åœ¨ github å­˜å‚¨åº“ä¸­æœ‰ä¸€ä¸ª reset.sh æ–‡ä»¶</p></blockquote><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="ea2a" class="nw jv iq om b gy oq or l os ot"># and this how we can execute the script that will configure <br/># everything for us.</span><span id="61cb" class="nw jv iq om b gy ox or l os ot"><strong class="om ir">$ bash &lt; create-replica-set.sh</strong></span></pre><p id="d7e4" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¦‚æœä¸€åˆ‡è®¾ç½®æ­£ç¡®ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šçœ‹åˆ°æ¥è‡ª mongodb çš„å¦‚ä¸‹æ¶ˆæ¯:</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="f1bc" class="nw jv iq om b gy oq or l os ot">MongoDB shell version v3.4.1<br/>connecting to: mongodb://127.0.0.1:27017<br/>MongoDB server version: 3.4.1<br/>{<br/> "set" : "rs1",<br/> ...<br/> },<br/> "members" : [<br/>  {<br/>   "_id" : 0,<br/>   "name" : "manager1:27017",<br/>   "health" : 1,<br/>   "state" : 1,<br/>   "stateStr" : "PRIMARY",<br/>   ...<br/>  },<br/>  {<br/>   "_id" : 1,<br/>   "name" : "worker1:27017",<br/>   "health" : 1,<br/>   "state" : 2,<br/>   "stateStr" : "SECONDARY",<br/>   ...<br/>  },<br/>  {<br/>   "_id" : 2,<br/>   "name" : "worker2:27017",<br/>   "health" : 1,<br/>   "state" : 0,<br/>   "stateStr" : "STARTUP",<br/>   ...<br/>  }<br/> ],<br/> "ok" : 1<br/>}</span></pre><p id="0a64" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæ¯ä¸ªå®¹å™¨ç°åœ¨éƒ½é…ç½®è‰¯å¥½ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åƒä»¥å‰ä¸€æ ·ä½¿ç”¨ docker ä¸­çš„<code class="fe ou ov ow om b">--add-host</code>æ ‡å¿—ï¼Œè¿™å°†è¿™äº›æ¡ç›®æ·»åŠ åˆ° Docker å®¹å™¨çš„/etc/hosts æ–‡ä»¶ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸»æœºåè€Œä¸æ˜¯ IP åœ°å€ã€‚</p><p id="14c1" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä¸¤ä¸ªèŠ‚ç‚¹ä» mongoNode1 å®ŒæˆåŒæ­¥å¯èƒ½éœ€è¦ä¸€åˆ†é’Ÿæ—¶é—´ã€‚</p><p id="01f9" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ‚¨å¯ä»¥é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ¥æŸ¥çœ‹æ¯ä¸ª mongo Docker å®¹å™¨ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ä»»ä½• docker-machine æœåŠ¡å™¨ä¸Šè¿è¡Œè¯¥å‘½ä»¤æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="d5f8" class="nw jv iq om b gy oq or l os ot">$ docker logs -ft mongoContainerName</span></pre><p id="37d6" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª<strong class="ku ir"> MongoDB å‰¯æœ¬é›†</strong>æœåŠ¡ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œæˆ–è€…æ‚¨å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶æˆäºˆä¸€äº›æƒé™æ¥å¯¹æ•°æ®åº“è¿›è¡Œ crud æ“ä½œï¼Œå› æ­¤ï¼Œä»…å‡ºäºè¯´æ˜çš„ç›®çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å¥½çš„åšæ³•ï¼Œè®©æˆ‘ä¸ºæˆ‘ä»¬çš„ admin ç”¨æˆ·æ·»åŠ ä¸€ä¸ªè¶…çº§è§’è‰²ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="d4d9" class="nw jv iq om b gy oq or l os ot"># we are going to assign the root role to our admin user</span><span id="4f26" class="nw jv iq om b gy ox or l os ot"><strong class="om ir"># we enter to the container</strong><br/>$ docker exec -it mongoNode1 bash -c 'mongo -u $MONGO_USER_ADMIN -p $MONGO_PASS_ADMIN --authenticationDatabase "admin"'</span><span id="e6ca" class="nw jv iq om b gy ox or l os ot"><strong class="om ir"># Then we execute the following in the mongo shell</strong><br/># Mongo 3.4.1 shell<br/>&gt; use admin<br/>&gt; db.grantRolesToUser( "cristian", [ "root" , { role: "root", db: "admin" } ] )<br/>&gt;</span></pre><p id="1184" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨ä»–æœ‰äº†ä¸€ä¸ªå¯ä»¥åšä»»ä½•ä¸œè¥¿çš„è¶…çº§ç”¨æˆ·ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å¹¶æ’å…¥ä¸€äº›æ•°æ®ã€‚</p><pre class="nj nk nl nm gt ol om on oo aw op bi"><span id="6d0d" class="nw jv iq om b gy oq or l os ot">$ docker exec -it mongoNode1 bash -c 'mongo -u $MONGO_USER_ADMIN -p $MONGO_PASS_ADMIN --authenticationDatabase "admin"'</span><span id="0ae9" class="nw jv iq om b gy ox or l os ot"># Mongo 3.4.1 shell<br/>&gt; use movies<br/>&gt; db.movies.insertMany([{<br/>  id: '1',<br/>  title: 'Assasins Creed',<br/>  runtime: 115,<br/>  format: 'IMAX',<br/>  plot: 'Lorem ipsum dolor sit amet',<br/>  releaseYear: 2017,<br/>  releaseMonth: 1,<br/>  releaseDay: 6<br/>}, {<br/>  id: '2',<br/>  title: 'Aliados',<br/>  runtime: 124,<br/>  format: 'IMAX',<br/>  plot: 'Lorem ipsum dolor sit amet',<br/>  releaseYear: 2017,<br/>  releaseMonth: 1,<br/>  releaseDay: 13<br/>}, {<br/>  id: '3',<br/>  title: 'xXx: Reactivado',<br/>  runtime: 107,<br/>  format: 'IMAX',<br/>  plot: 'Lorem ipsum dolor sit amet',<br/>  releaseYear: 2017,<br/>  releaseMonth: 1,<br/>  releaseDay: 20<br/>}, {<br/>  id: '4',<br/>  title: 'Resident Evil: Capitulo Final',<br/>  runtime: 107,<br/>  format: 'IMAX',<br/>  plot: 'Lorem ipsum dolor sit amet',<br/>  releaseYear: 2017,<br/>  releaseMonth: 1,<br/>  releaseDay: 27<br/>}, {<br/>  id: '5',<br/>  title: 'Moana: Un Mar de Aventuras',<br/>  runtime: 114,<br/>  format: 'IMAX',<br/>  plot: 'Lorem ipsum dolor sit amet',<br/>  releaseYear: 2016,<br/>  releaseMonth: 12,<br/>  releaseDay: 2<br/>}])</span><span id="aa0a" class="nw jv iq om b gy ox or l os ot"># inserted 5 documents<br/>&gt; </span></pre><p id="3ceb" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªç”µå½±æ•°æ®åº“ï¼Œå…¶ä¸­çš„ç”µå½±é›†åˆåŒ…å« 5 éƒ¨ç”µå½±:dã€‚</p><h1 id="f0a3" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">#æ˜¯æ—¶å€™å›é¡¾ä¸€ä¸‹äº†</h1><p id="5680" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">æˆ‘ä»¬æ‰€åšçš„â€¦</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/07f2cb7820f168937504afd3bf90ce6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*-AhztyUh836BrQi20RqeGQ.png"/></div></div></figure><p id="23c2" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æˆ‘ä»¬ä½¿ç”¨å¸¦æœ‰è‡ªåŠ¨åŒ–è„šæœ¬çš„<strong class="ku ir"> Dockerã€</strong>é…ç½®å¹¶å¯åŠ¨å¸¦æœ‰<strong class="ku ir">è®¤è¯çš„<strong class="ku ir"> MongoDB å‰¯æœ¬é›†</strong>ã€‚</strong></p><p id="ea61" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">åœ¨å®‰å…¨æ€§æ–¹é¢ï¼Œæˆ‘ä»¬åˆ›å»ºäº†:</p><ul class=""><li id="6afe" class="mu mv iq ku b kv mp kz mq ld mw lh mx ll my lp mz na nb nc bi translated">2 ç±»ç”¨æˆ·ï¼Œå³<strong class="ku ir">ç®¡ç†æ•°æ®åº“</strong>å’Œ<strong class="ku ir">é›†ç¾¤ç®¡ç†æ•°æ®åº“ã€‚</strong></li><li id="b29e" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<strong class="ku ir">å¯†é’¥æ–‡ä»¶</strong>ï¼Œå¹¶åœ¨å¯ç”¨<strong class="ku ir">èº«ä»½éªŒè¯çš„æƒ…å†µä¸‹å¯åŠ¨å‰¯æœ¬ã€‚</strong></li></ul><blockquote class="oy oz pa"><p id="0026" class="ks kt pb ku b kv mp kx ky kz mq lb lc pc mr lf lg pd ms lj lk pe mt ln lo lp ij bi translated">å¦‚æœä¸ºæ•°æ®åº“æ­£ç¡®é…ç½®äº†è®¿é—®æ§åˆ¶ï¼Œæ”»å‡»è€…åº”è¯¥æ— æ³•è®¿é—®æ‚¨çš„æ•°æ®ã€‚æŸ¥çœ‹æˆ‘ä»¬çš„<a class="ae pf" href="https://docs.mongodb.com/manual/administration/security-checklist/" rel="noopener ugc nofollow" target="_blank">å®‰å…¨æ¸…å•</a>ä»¥å¸®åŠ©å‘ç°æ½œåœ¨çš„å¼±ç‚¹ã€‚â€” <a class="ae pf" href="https://www.mongodb.com/blog/post/how-to-avoid-a-malicious-attack-that-ransoms-your-data?utm_source=dbweekly&amp;utm_medium=email" rel="noopener ugc nofollow" target="_blank"> @MongoDB Docs </a></p></blockquote><p id="a14a" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¦‚æœæˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„æ¶æ„å¢åŠ æ›´å¤šçš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬çš„ docker-machines åˆ›å»ºä¸€ä¸ª<strong class="ku ir"> Swarm é›†ç¾¤ã€</strong>ï¼Œdocker swarm å¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç½‘ç»œé€šä¿¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æˆ‘ä»¬çš„å®¹å™¨ä¸­åˆ›å»ºéæ ¹ç”¨æˆ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ mongoDB ä¸­å¯ç”¨åŠ å¯†æ•°æ®ï¼Œä½†æ˜¯è¿™ä¸ªä¸»é¢˜ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="eea0" class="ju jv iq bd jw jx pm jz ka kb pn kd ke kf po kh ki kj pp kl km kn pq kp kq kr bi translated">#ç»“è®º</h1><p id="90a6" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå·¥ä½œçš„<strong class="ku ir"> MongoDB å‰¯æœ¬é›†</strong>ã€‚æ‚¨å¯ä»¥éšæ—¶å‘è¯¥å‰¯æœ¬é›†æ·»åŠ èŠ‚ç‚¹ã€‚æ‚¨ç”šè‡³å¯ä»¥åœæ­¢ä¸€ä¸ª mongo å®¹å™¨æˆ–ä¸» mongoNode1ï¼Œå¹¶è§‚å¯Ÿå¦ä¸€ä¸ª mongoNode ä½œä¸ºæ–°çš„ä¸» mongoNodeã€‚ç”±äº<strong class="ku ir">æ•°æ®å†™å…¥ docker å·</strong>ä¸­ï¼Œé‡å¯è¿™äº›èŠ‚ç‚¹ä¸æˆé—®é¢˜ã€‚<strong class="ku ir">æ•°æ®å°†ç»§ç»­å­˜åœ¨</strong>å¹¶å®Œå¥½æ— æŸåœ°é‡æ–°åŠ å…¥å‰¯æœ¬é›†ã€‚</p><p id="d1bd" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œä¸€ä¸ªå¥½å¤„æ˜¯æˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•ç”¨ bash æ–‡ä»¶æ¥è‡ªåŠ¨åŒ–æ•´ä¸ªè¿‡ç¨‹ã€‚</p><p id="a58a" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æ‚¨é¢ä¸´çš„ä¸€ä¸ªæŒ‘æˆ˜æ˜¯ä¿®æ”¹<strong class="ku ir"> bash è„šæœ¬</strong>å¹¶ä½¿å…¶æ›´åŠ åŠ¨æ€<strong class="ku ir"/>ï¼Œå› ä¸ºè¯¥è„šæœ¬éå¸¸ä¾èµ–äºæœ¬æ–‡è§„èŒƒï¼Œå¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å‘æ¶æ„æ·»åŠ ä¸€ä¸ªä»»æ„çš„ Mongo èŠ‚ç‚¹ã€‚</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="ff8f" class="ju jv iq bd jw jx pm jz ka kb pn kd ke kf po kh ki kj pp kl km kn pq kp kq kr bi translated">Github çŸ¥è¯†åº“</h1><p id="ae48" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">è¦è·å¾—æ–‡ç« çš„å®Œæ•´è„šæœ¬æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„ repo ä¸­æŸ¥çœ‹ã€‚</p><div class="lq lr gp gr ls lt"><a href="https://github.com/Crizstian/mongo-replica-with-docker" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">GitHub-Crizstian/mongo-Replica-with-docker:å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² MongoDB å‰¯æœ¬é›†</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">å¦‚ä½•ä½¿ç”¨ docker éƒ¨ç½²ä¸€ä¸ª MongoDB å‰¯æœ¬é›†</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">github.com</p></div></div><div class="mc l"><div class="pr l me mf mg mc mh js lt"/></div></div></a></div><h1 id="79b1" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">è¿›ä¸€æ­¥é˜…è¯»</h1><ul class=""><li id="7864" class="mu mv iq ku b kv kw kz la ld oi lh oj ll ok lp mz na nb nc bi translated"><a class="ae pf" href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set-with-keyfile-access-control/#deploy-repl-set-with-auth" rel="noopener ugc nofollow" target="_blank">éƒ¨ç½²å¸¦æœ‰å¯†é’¥æ–‡ä»¶è®¿é—®æ§åˆ¶çš„å‰¯æœ¬é›†</a> â€” MongoDB Docsã€‚</li><li id="4341" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated">å‘å‰¯æœ¬é›†æ·»åŠ æˆå‘˜ â€” MongoDB Docsã€‚</li><li id="3adf" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><a class="ae pf" href="https://hub.docker.com/_/mongo/" rel="noopener ugc nofollow" target="_blank">MongoDB Docker Hub</a>â€”Docker Docsã€‚</li><li id="98fc" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><a class="ae pf" href="https://www.mongodb.com/blog/post/how-to-avoid-a-malicious-attack-that-ransoms-your-data?utm_source=dbweekly&amp;utm_medium=email" rel="noopener ugc nofollow" target="_blank">å¦‚ä½•é¿å…å‹’ç´¢æ‚¨æ•°æ®çš„æ¶æ„æ”»å‡»</a></li><li id="17a5" class="mu mv iq ku b kv nd kz ne ld nf lh ng ll nh lp mz na nb nc bi translated"><a class="ae pf" href="https://www.opsdash.com/blog/howto-setup-mongodb-secure.html?utm_source=dbweekly&amp;utm_medium=email" rel="noopener ugc nofollow" target="_blank">å¦‚ä½•åœ¨ ubuntu 16.04 ä¸Šè®¾ç½®å®‰å…¨çš„ mongoDB 3.4 æœåŠ¡å™¨</a></li></ul></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="f4b2" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç›®å‰ä»åœ¨æ¢ç´¢ MongoDB ä¸–ç•Œï¼Œæ‰€ä»¥æˆ‘æ„¿æ„æ¥å—åé¦ˆæˆ–è´¡çŒ®ï¼Œå¦‚æœä½ å–œæ¬¢å®ƒï¼Œæ¨èç»™æœ‹å‹ï¼Œåˆ†äº«æˆ–å†æ¬¡é˜…è¯»ã€‚</p><p id="e9e8" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ä½ å¯ä»¥åœ¨æ¨ç‰¹@ crami rez _ 92ã€https://twitter.com/cramirez_92ã€‘T3<br/>å…³æ³¨æˆ‘</p><p id="383f" class="pw-post-body-paragraph ks kt iq ku b kv mp kx ky kz mq lb lc ld mr lf lg lh ms lj lk ll mt ln lo lp ij bi translated">ç›´åˆ°ä¸‹æ¬¡ğŸ˜ğŸ‘¨ğŸ¼â€ğŸ¨ğŸ‘¨ğŸ»â€ğŸ’»</p></div></div>    
</body>
</html>