# è¯¾ç¨‹ 2 â€”æ•°æ®ç»“æ„â€”ç¬¬ 2 éƒ¨åˆ†:ä¼˜å…ˆçº§é˜Ÿåˆ—å’Œä¸ç›¸äº¤é›†

> åŸæ–‡ï¼š<https://towardsdatascience.com/course-2-data-structure-part-2-priority-queues-and-disjoint-set-ed11a0383011?source=collection_archive---------0----------------------->

å¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“åå°å·¥ä½œæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ k ä¸ªæœ€å°å…ƒç´ çš„æœ€å¿«æ–¹æ³•ï¼Œæ•°æ®åº“ä¸­çš„åˆå¹¶è¡¨æ˜¯å¦‚ä½•åœ¨åå°å·¥ä½œçš„ï¼Œè¯·ç»§ç»­é˜…è¯»ã€‚å› ä¸ºåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¼˜å…ˆçº§é˜Ÿåˆ—å’Œä¸ç›¸äº¤é›†ã€‚ä¸¤ç§æ•°æ®ç»“æ„éƒ½å¾ˆæ¼‚äº®çš„è§£å†³äº†è¿™äº›é—®é¢˜ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬ä¼šè§£å†³ä»¥ä¸Šè¿™äº›é—®é¢˜ã€‚å¿«ä¹é˜…è¯»ï¼

# ä¼˜å…ˆçº§é˜Ÿåˆ—

![](img/5846fde514d42ffa07d89b41c65f9948.png)

ä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯è¿™æ ·ä¸€ç§é˜Ÿåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ è¢«åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œå¹¶ä¸”å…ƒç´ æŒ‰ä¼˜å…ˆçº§é¡ºåºå‡ºç°ã€‚ä¼˜å…ˆçº§é˜Ÿåˆ—çš„å…¸å‹ç”¨ä¾‹æ˜¯è°ƒåº¦ä½œä¸šã€‚æ¯ä¸ªå·¥ä½œéƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¼˜å…ˆçº§é€’å‡çš„é¡ºåºå¤„ç†å·¥ä½œã€‚åŒæ—¶æ­£åœ¨å¤„ç†å½“å‰ä½œä¸šï¼Œæ–°ä½œä¸šå¯èƒ½ä¼šåˆ°è¾¾ã€‚

ä¼˜å…ˆçº§é˜Ÿåˆ—æœ‰ä¸€äº›ä¸»è¦æ“ä½œ:

*   **Insert(p)** :æ·»åŠ ä¸€ä¸ªä¼˜å…ˆçº§ä¸º p çš„æ–°å…ƒç´ ã€‚
*   **ExtractMax()** :æå–ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚
*   **ChangePriority(itï¼Œp)** :å°† **it** æŒ‡å‘çš„å…ƒç´ çš„ä¼˜å…ˆçº§æ”¹ä¸º **p** ã€‚

ä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºè®¸å¤šç®—æ³•ä¸­:

*   Dijkstra ç®—æ³•:åœ¨å›¾ä¸­å¯»æ‰¾æœ€çŸ­è·¯å¾„ã€‚
*   Prim çš„ç®—æ³•:æ„é€ ä¸€ä¸ªå›¾çš„æœ€å°ç”Ÿæˆæ ‘ã€‚
*   éœå¤«æ›¼ç®—æ³•:æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²çš„æœ€ä½³æ— å‰ç¼€ç¼–ç ã€‚
*   å †æ’åº:å¯¹ç»™å®šçš„åºåˆ—è¿›è¡Œæ’åºã€‚

æ‚¨å¯ä»¥ä½¿ç”¨æœªæ’åº/å·²æ’åºçš„æ•°ç»„æˆ–åˆ—è¡¨æ¥å®ç°ä¼˜å…ˆçº§ï¼Œä½†æ˜¯æ¯ä¸€ç§éƒ½æœ‰ä¸€ä¸ªæƒè¡¡:

![](img/98c683aed71c91dae000a67563724846.png)

ä½†æ˜¯é€šè¿‡ä½¿ç”¨äºŒè¿›åˆ¶å †ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ O(logn)åš **Insert** ï¼Œç”¨ O(logn)åš **ExtractMax** ã€‚

# äºŒå…ƒå †

äºŒè¿›åˆ¶å †æœ‰ä¸¤ç§ç±»å‹:äºŒè¿›åˆ¶æœ€å°å †å’ŒäºŒè¿›åˆ¶æœ€å¤§å †ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºäºŒè¿›åˆ¶æœ€å¤§å †ã€‚å¦ä¸€æ–¹é¢ï¼ŒäºŒè¿›åˆ¶æœ€å°å †ä¹Ÿæœ‰ç›¸åŒçš„å®ç°æ–¹å¼ã€‚

äºŒè¿›åˆ¶æœ€å¤§å †æ˜¯ä¸€ä¸ªäºŒå‰æ ‘(æ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªã€ä¸€ä¸ªæˆ–ä¸¤ä¸ªå­©å­)ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼è‡³å°‘æ˜¯å…¶å­©å­çš„å€¼ã€‚

![](img/235582bf46cf31a2b6511aaf9e9a1d54.png)

å¦‚æ‚¨æ‰€è§ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½ä¸å¤§äºçˆ¶èŠ‚ç‚¹çš„å€¼ã€‚æ ¹èŠ‚ç‚¹å…·æœ‰æœ€å¤§å€¼ã€‚

![](img/4c2ee2fa5116e5fe3224c5db5c0dd03d.png)

Not a max-heap. Some children are bigger than parent.

Max-Heap æœ‰ä¸€äº›åŸºæœ¬æ“ä½œ:

*   **GetMax** :è¿”å›æ ¹å€¼å³å¯ã€‚æˆæœ¬ O(1)ã€‚

![](img/135d9429ace6aeeb8f06cf4c259fb0a6.png)

*   **æ’å…¥**:æˆ‘ä»¬å°†æŠŠä¸€ä¸ªæ–°èŠ‚ç‚¹é™„åŠ åˆ°ä»»ä½•ä¸€ä¸ªå¶å­ä¸Šã€‚å¦‚æœå®ƒè¿åäº†å †å±æ€§ï¼Œæˆ‘ä»¬å°†å†’æ³¡(ç§°ä¸º **SiftUp** )æ–°èŠ‚ç‚¹ï¼Œç›´åˆ°æ»¡è¶³å †å±æ€§ã€‚o(æ ‘é«˜)

![](img/8f9810344b2b2002fd7ee57354098b03.png)

å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬å°†æ–°èŠ‚ç‚¹ 32 è¿æ¥åˆ°èŠ‚ç‚¹ 7ï¼Œå¹¶å°†å…¶å†’æ³¡åˆ°èŠ‚ç‚¹ 29ã€‚

*   **ExtractMax** :æ ¹èŠ‚ç‚¹ R æ˜¯ max-heap çš„æœ€å¤§å€¼ã€‚è¦å¼¹å‡ºæ ¹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬åªè¦æŠŠæ ¹èŠ‚ç‚¹ R æ¢æˆä»»æ„ä¸€ä¸ªå¶èŠ‚ç‚¹ Aï¼Œå»æ‰èŠ‚ç‚¹ R å°±å¯ä»¥äº†ï¼Œå¯èƒ½ä¼šè¿èƒŒ heap çš„å±æ€§ã€‚æˆ‘ä»¬å°†åš **SiftDown** æ“ä½œã€‚ä½œä¸ºçˆ¶èŠ‚ç‚¹ Aï¼Œæˆ‘ä»¬è¦ **SiftDown** åˆ°å­èŠ‚ç‚¹ B å’Œ Cï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©å­èŠ‚ç‚¹ B å’Œ C çš„æœ€å¤§å€¼ï¼Œäº¤æ¢åˆ°èŠ‚ç‚¹ Aï¼Œæˆ‘ä»¬ SiftDown ç›´åˆ°æ»¡è¶³å †çš„å±æ€§ã€‚

![](img/df53021159a927f64d1c5c5ac1045e29.png)

æˆ‘ä»¬é¦–å…ˆäº¤æ¢æ ¹èŠ‚ç‚¹ 42 å’Œéšæœºå¶èŠ‚ç‚¹ 12ï¼Œå¹¶ç§»é™¤èŠ‚ç‚¹ 42ã€‚ç°åœ¨è¿åäº†æœ€å¤§å †ï¼Œæˆ‘ä»¬éœ€è¦å°†èŠ‚ç‚¹ 12 å‘ä¸‹ç­›é€‰ä¸ºå­èŠ‚ç‚¹ã€‚åœ¨æœ€åä¸€æ­¥ï¼ŒèŠ‚ç‚¹ 29 æ˜¯æ ¹èŠ‚ç‚¹ã€‚

*   æ”¹å˜ä¼˜å…ˆçº§:æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸€ä¸ªèŠ‚ç‚¹çš„ä¼˜å…ˆçº§ã€‚æ ¹æ®æ–°ä¼˜å…ˆçº§çš„å€¼ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ SiftDown æˆ– SiftUp æ¥é™å®šå †å±æ€§ã€‚
*   **ç§»é™¤**:ç§»é™¤èŠ‚ç‚¹ aã€‚æˆ‘ä»¬åˆ†ä¸¤æ­¥å®Œæˆ:

**æ­¥éª¤ 1:** ä½¿èŠ‚ç‚¹ A å€¼å˜å¾—æœ€å¤§(æ— ç©·å¤§)ã€‚æˆ‘ä»¬å°†æ‰§è¡Œ **SiftUp** æ“ä½œï¼Œä½¿èŠ‚ç‚¹ A æˆä¸ºæ ¹èŠ‚ç‚¹ã€‚

**ç¬¬äºŒæ­¥:**æˆ‘ä»¬æ‰§è¡Œä¸Šé¢æè¿°çš„ **ExtractMax** æ“ä½œã€‚

# å»ºç­‘å †

æˆ‘ä»¬çŸ¥é“å †æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å»ºç«‹ä¸€ä¸ªå †çš„æ–¹æ³•ã€‚ä¸ºäº†æ„å»ºä¸€ä¸ªå †å¹¶ä¿æŒä¸€ä¸ªäºŒå‰å †æ ‘æµ…æ»©ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ€åä¸€å±‚ä»å·¦åˆ°å³å¡«å……æ–°çš„èŠ‚ç‚¹ã€‚å«åš**å®Œå…¨äºŒå‰æ ‘**ã€‚å½¢å¼ä¸Š:

å¦‚æœä¸€æ£µäºŒå‰æ ‘çš„æ‰€æœ‰å±‚æ¬¡éƒ½è¢«å¡«æ»¡ï¼Œé™¤äº†å¯èƒ½æ˜¯ä»å·¦åˆ°å³å¡«æ»¡çš„æœ€åä¸€å±‚ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å®Œæ•´çš„ã€‚æ‰€ä»¥ä¸€æ£µæœ‰ n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„é«˜åº¦æœ€å¤šæ˜¯ O(logn)ã€‚

![](img/87b969c824bc330d5ec3c4e03e4396db.png)

ä¸€ä¸ªå®Œæ•´çš„äºŒå‰æ ‘æœ‰ä»å·¦åˆ°å³å¡«å……çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ ‘å­˜å‚¨ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­

![](img/ee9a4d29da292a1a8e9bc1134ac00c72.png)

å› ä¸ºæˆ‘ä»¬ä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰§è¡Œçš„æ¯ä¸ªæ“ä½œéƒ½éœ€è¦ä¿æŒæ ‘çš„å®Œæ•´æ€§ã€‚

## æœ€å¤§å †çš„ä¼ªä»£ç 

```
# we store elements in array Hdef parent(i):
  return i/2def left_child(i):
  return 2idef right_child(i):
  return 2i + 1def sift_up(i):
  while i > 1 and H[parent(i)] < H[i]:
    swap H[parent(i)] and H[i]
    i <- parent(i)def sift_down(i):
  maxIndex <- i
  left <- left_child(i)
  if left <= size and H[left] > H[maxIndex]:
    maxIndex <- left
  right <- right_child(i)
  if right <= size and H[right] > H[maxIndex]:
    maxIndex <- right
  if i != maxIndex:
    swap H[i] and H[maxIndex]
    SiftDown(maxIndex)def insert(p):
  if size = maxSize:
    return ERROR
  size <- size + 1
  H[size] <- p
  SiftUp(size)def extract_max():
  result <- H[1]
  H[1] <- H[size]
  size <- size - 1
  SiftDown(1)
  return resultdef remove(i):
  H[i] = âˆ
  sift_up(i)
  extract_max()def change_priority(i, p):
  oldp <- H[i]
  H[i] <- p
  if p > oldp:
    sift_up(i)
  else:
    sift_down(i)
```

# å †æ’åº

å›åˆ°æ’åºé—®é¢˜ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æœ€å¤§å †çš„æ ¹èŠ‚ç‚¹æ˜¯æœ€å¤§å€¼ã€‚å¦‚æœæˆ‘ä»¬åš **ExtractMax()** å¹¶æ”¾å…¥å¦ä¸€ä¸ªæ•°ç»„ï¼Œç»“æœå°†æ˜¯æ’åºé€’å‡æ•°ç»„ã€‚è¿™æ˜¯é€‰æ‹©æ’åºçš„åŸºç¡€ã€‚å®ƒçš„ä»·æ ¼ä¸º O(nlogn)ã€‚

```
def heap_sort_selection_sort(A[1...n]):
  create an empty priority queue
  for i from 1 to n:
    Insert(A[i]) # Insert operation to build max-heap.
  for i from n downto 1:
    A[i] <- ExtractMax()
```

äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åšæ›´å¥½çš„å †æ’åºç®—æ³•ï¼Œä¸ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ•°ç»„ï¼Œå®ƒæ˜¯å°±åœ°å †æ’åºç®—æ³•ã€‚ç»™å®šä¸€ä¸ªæ•°ç»„

```
A = [ 4, 1, 3, 2, 16, 9, 10, 14 , 8, 7]
```

æˆ‘ä»¬å°†æ•°ç»„ A è¡¨ç¤ºä¸ºä¸€ä¸ªå †:

![](img/a7dcec4f73d7d67d9eee579285b115bc.png)

ç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®å¤æ‰€æœ‰èŠ‚ç‚¹ä»¥æ»¡è¶³ max-heap çš„å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥å¼€å§‹ä¿®å¤æ·±åº¦ä¸º 1 çš„æ‰€æœ‰å­æ ‘ä¸­çš„èŠ‚ç‚¹(æ·±åº¦ä¸º 0 çš„æ˜¯æ‰€æœ‰çš„å¶å­)ã€‚æ·±åº¦ä¸º 1 çš„èŠ‚ç‚¹ä» n/2 åˆ° 1

```
def build_heap(A[1...n]):
  size <- n
  for i from n/2 downto 1:
    SiftDown(i)
```

![](img/92cae4e409dd583cc0edaf7a47423395.png)

æˆ‘ä»¬ä»çˆ¶èŠ‚ç‚¹ 5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1([16ï¼Œ2ï¼Œ3ï¼Œ1ï¼Œ4])å¼€å§‹ã€‚æ¯ä¸€æ­¥ï¼Œæˆ‘ä»¬åš **SiftDown** æ“ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªæœ€å¤§å †(f)ã€‚

è¦å¯¹æœ€å¤§å †è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬åªéœ€äº¤æ¢èŠ‚ç‚¹ A[1]å’Œ A[size]ï¼Œç§»é™¤ A[size]å’Œ SiftDown(1)ã€‚

```
def heap_sort(A[1...n]):
  repeat (n-1) times:
    swap A[1] and A[size]
    size <- size - 1
    SiftDown(1)
```

![](img/4ccf660d8935da08038f68ca539498e1.png)

# éƒ¨åˆ†æ’åº

ç»™å®šæ•°ç»„ A[1â€¦n]ï¼Œå¹¶ä¸” 1 â‰¤ k â‰¤ nã€‚è¾“å‡º A çš„æ’åºç‰ˆæœ¬çš„æœ€å k ä¸ªå…ƒç´ ã€‚

æœ‰äº†å †æ’åºï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“è§£å†³è¿™ä¸ªé—®é¢˜:

```
def partial_sorting(A[1...n], k):
  build_heap(A)
  for i from 1 to k:
    extract_max()
```

è¿è¡Œæ—¶é—´ä¸º:O(n+klogn)ã€‚å¯¹äºè¾ƒå°çš„æ•° k = O(n/logn)ï¼Œä»£ä»·å°†ä¸º O(n)ã€‚çœŸä»¤äººå°è±¡æ·±åˆ»ã€‚

# ä¸ç›¸äº¤é›†

ä¸ç›¸äº¤é›†æœ‰è®¸å¤šåº”ç”¨ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯ç¡®å®šæ— å‘å›¾çš„è¿é€šåˆ†é‡ã€‚

![](img/e701f2cb8be1a55f8e145d186ad20eac.png)

ä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„ç»´æŠ¤ä¸ç›¸äº¤åŠ¨æ€é›†åˆçš„ S1ã€S2ã€â€¦ã€Sk çš„é›†åˆã€‚æˆ‘ä»¬æŠŠæ¯ä¸ªé›†åˆè¡¨ç¤ºæˆä¸€æ£µæœ‰æ ¹çš„æ ‘ã€‚

![](img/20c284b360c0993c3d2e68d42650802c.png)

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨è¿™äº›é›†åˆ(æœ‰æ ¹çš„æ ‘),è¯¥æ•°ç»„çš„å€¼ A[i]æ˜¯èŠ‚ç‚¹ I çš„çˆ¶èŠ‚ç‚¹ï¼Œæˆ–è€…å¦‚æœèŠ‚ç‚¹ I æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆ™å®ƒæ˜¯èŠ‚ç‚¹ I çš„çˆ¶èŠ‚ç‚¹ã€‚

ä¸ç›¸äº¤é›†æœ‰ä¸€äº›ä¸»è¦æ“ä½œ:

*   MakeSet(i) :åˆ›å»ºä¸€ä¸ªåªåŒ…å«ä¸€ä¸ª I é›†åˆ:{i}ã€‚

```
def make_set(i):
  parent[i] <- i
```

*   **æŸ¥æ‰¾(i)** :åœ¨ä¸€ä¸ªé›†åˆä¸­æŸ¥æ‰¾ Iï¼Œè¿”å›æ ¹ç´¢å¼•

```
def find(i):
  while i != parent[i]:
    i <- parent[i]
  return i
```

*   **è”åˆ(S2 S1)**:åˆå¹¶ä¸¤ä¸ªæœ‰æ ¹çš„æ ‘ã€‚è¿™æ˜¯ä¸äº¤é›†æœ€é‡è¦çš„è¿ç®—ã€‚

æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœ‰æ ¹çš„æ ‘ï¼Œæˆ‘ä»¬æƒ³è”åˆè¿™äº›æ ‘ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:

![](img/3946d9b7cc6100f99f9c1b177bad3f1d.png)

å¥½çš„é‚£ä¸ªæ˜¯èº«é«˜è¾ƒçŸ®çš„é‚£ä¸ªã€‚æˆ‘ä»¬å¦‚ä½•çŸ¥é“ä¸ºå¹¶é›†é€‰æ‹©æ ¹èŠ‚ç‚¹ï¼Ÿ

ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªç­‰çº§ä½œä¸ºé«˜åº¦æ¥é€‰æ‹©æœ€ç»ˆçš„æ ¹ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠçŸ®çš„æŒ‚åœ¨é«˜çš„æ ¹éƒ¨ã€‚ä¸ºäº†é¿å…æ¯æ¬¡æ‰§è¡Œ union æ“ä½œæ—¶éƒ½è¦é‡æ–°è®¡ç®— rank(height ),æˆ‘ä»¬éœ€è¦å°†æ¯ä¸ªå­æ ‘çš„é«˜åº¦å­˜å‚¨åœ¨æ•°ç»„ **rank[1â€¦n]** ä¸­ï¼Œå…¶ä¸­ rank[i]æ˜¯æ ¹ä¸º I çš„å­æ ‘çš„é«˜åº¦ã€‚

æˆ‘ä»¬æ”¹å˜äº†ä¸ç›¸äº¤é›†åˆè¿ç®—çš„å®ç°:

```
def make_set(i):
  parent[i] <- i
  rank[i] <- 0def find(i):
  while i != parent[i]:
    i <- parent[i]
  return idef union(i, j):
  i_id <- find(i)
  j_id <- find(j)
  if i_id == j_id:
    return
  if rank[i_id] > rank[j_id]:
    parent[j_id] <- i_id
  else:
    parent[i_id] <- j_id
    if rank[i_id] == rank[j_id]:
      rank[j_id] <- rank[j_id] + 1
```

è®©æˆ‘ä»¬æŠŠæ„å»ºä¸ç›¸äº¤é›†åˆçš„è¿‡ç¨‹å½¢è±¡åŒ–ï¼Œåšå¹¶é›†(2ï¼Œ4)ï¼Œå¹¶é›†(5ï¼Œ2)ï¼Œå¹¶é›†(3ï¼Œ1)ï¼Œå¹¶é›†(2ï¼Œ3)ï¼Œå¹¶é›†(2ï¼Œ6)ã€‚

![](img/fa4ce9f445bd5fc8d624eb715d7470fe.png)

æ¯ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©è¾ƒä½ç­‰çº§çš„æ ‘ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°è¾ƒé«˜ç­‰çº§çš„æ ‘ã€‚å½“æˆ‘ä»¬æœ‰ä¸¤ä¸ªç›¸åŒç­‰çº§çš„æ ‘æ—¶ï¼Œæˆ‘ä»¬åªå¢åŠ ç»“æœçš„ç­‰çº§ã€‚

## é€šè·¯å‹ç¼©

åœ¨é€ æ ‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é©¬ä¸Šæ„è¯†åˆ°æˆ‘ä»¬çš„æ ‘ä¼šå˜å¾—è¶Šæ¥è¶Šé«˜ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ‰¾åˆ°å…ƒç´  6ï¼Œæˆ‘ä»¬ç¡®å®éå†äº†æ‰€æœ‰çˆ¶èŠ‚ç‚¹ä»¥å¾—åˆ°æ ¹èŠ‚ç‚¹ 5ã€‚

![](img/52382bd039530adb21b446351a1c2516.png)

è¯·æ³¨æ„ï¼Œæ‰€æœ‰èŠ‚ç‚¹ 6ã€12ã€3 éƒ½æœ‰ç›¸åŒçš„æ ¹èŠ‚ç‚¹ 5ï¼Œå› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå°†å®ƒä»¬çš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹è½¬æ¢ä¸ºç›´æ¥çˆ¶èŠ‚ç‚¹ 5ï¼Œå°±å¤ªå¥½äº†ï¼Œå°±åƒè¿™æ ·:

![](img/2b2f9fd5427a2910fb53a949715d7bef.png)

Path Compression

ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å‹ç¼©é«˜åº¦ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¿«åœ°æ‰¾åˆ°å…ƒç´ ã€‚ä½ ä¼šæƒŠå¥‡åœ°å‘ç°ï¼Œè¿™ç§å¯å‘å¼çš„å®ç°å¦‚æ­¤ç®€å•:

```
def find(i):
  if i != parent[i]:
    parent[i] <- find(parent[i])
  return parent[i]
```

# é—®é¢˜ 1:å°†æ•°ç»„è½¬æ¢æˆå †

åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œä½ å°†æŠŠä¸€ä¸ªæ•´æ•°æ•°ç»„è½¬æ¢æˆä¸€ä¸ªå †ã€‚è¿™æ˜¯ç§°ä¸º HeapSort çš„æ’åºç®—æ³•çš„å…³é”®æ­¥éª¤ã€‚å®ƒä¿è¯äº†æœ€åæƒ…å†µä¸‹ğ‘‚(ğ‘›æ—¥å¿—ğ‘›çš„è¿è¡Œæ—¶é—´ï¼Œè€Œä¸æ˜¯å¿«é€Ÿæ’åºçš„ğ‘‚(ğ‘›æ—¥å¿—ğ‘›).çš„å¹³å‡è¿è¡Œæ—¶é—´å¿«é€Ÿæ’åºé€šå¸¸åœ¨å®è·µä¸­ä½¿ç”¨ï¼Œå› ä¸ºé€šå¸¸å®ƒæ›´å¿«ï¼Œä½†æ˜¯å †æ’åºç”¨äºå¤–éƒ¨æ’åºï¼Œå½“ä½ éœ€è¦æ’åºä¸åœ¨ä½ çš„è®¡ç®—æœºå†…å­˜ä¸­çš„å¤§æ–‡ä»¶æ—¶ã€‚

**é—®é¢˜æè¿°**

**ä»»åŠ¡ã€‚**heap sort ç®—æ³•çš„ç¬¬ä¸€æ­¥æ˜¯ä»æƒ³è¦æ’åºçš„æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªå †ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œä½ çŸ¥é“åŸºäºå †çš„ç®—æ³•è¢«å¹¿æ³›ç”¨äºå¤–éƒ¨æ’åºå—ï¼Ÿå½“ä½ éœ€è¦å¯¹ä¸åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„å¤§æ–‡ä»¶è¿›è¡Œæ’åºæ—¶ã€‚

æ‚¨çš„ä»»åŠ¡æ˜¯å®ç°è¿™ç¬¬ä¸€æ­¥ï¼Œå¹¶å°†ç»™å®šçš„æ•´æ•°æ•°ç»„è½¬æ¢æˆå †ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å¯¹é˜µåˆ—åº”ç”¨ä¸€å®šæ•°é‡çš„äº¤æ¢ã€‚Swap æ˜¯å°†æ•°ç»„ğ‘ä¸­çš„å…ƒç´ ğ‘ğ‘–å’Œğ‘ğ‘—ä¸ä¸€äº›ğ‘–å’Œğ‘—.è¿›è¡Œäº¤æ¢çš„æ“ä½œä½ éœ€è¦å°†æ•°ç»„è½¬æ¢æˆä¸€ä¸ªåªä½¿ç”¨ğ‘‚(ğ‘›äº¤æ¢çš„å †ï¼Œæ­£å¦‚åœ¨è¯¾å ‚ä¸Šæ‰€æè¿°çš„ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ‚¨éœ€è¦ä½¿ç”¨æœ€å°å †è€Œä¸æ˜¯æœ€å¤§å †ã€‚

**è¾“å…¥æ ¼å¼ã€‚**è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«å•ä¸ªæ•´æ•°ğ‘›.ä¸‹ä¸€è¡ŒåŒ…å«ğ‘›ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ğ‘ğ‘–.

**è¾“å‡ºæ ¼å¼ã€‚**è¾“å‡ºçš„ç¬¬ä¸€è¡Œåº”è¯¥åŒ…å«å•æ•´æ•°ğ‘šâ€”â€”äº¤æ¢çš„æ€»æ•°ã€‚ğ‘šå¿…é¡»æ»¡è¶³æ¡ä»¶ 0 â‰¤ ğ‘š â‰¤ 4ğ‘›.æ¥ä¸‹æ¥çš„ğ‘šè¡Œåº”è¯¥åŒ…å«ç”¨äºå°†æ•°ç»„ğ‘è½¬æ¢ä¸ºå †çš„äº¤æ¢æ“ä½œã€‚æ¯æ¬¡äº¤æ¢éƒ½ç”±ä¸€å¯¹æ•´æ•°ğ‘–,ğ‘—æ¥æè¿°ï¼Œè¿™æ˜¯è¦äº¤æ¢çš„å…ƒç´ çš„ä» 0 å¼€å§‹çš„ç´¢å¼•ã€‚åœ¨æŒ‰æŒ‡å®šé¡ºåºåº”ç”¨æ‰€æœ‰äº¤æ¢åï¼Œæ•°ç»„å¿…é¡»å˜æˆä¸€ä¸ªå †ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äº 0â‰¤ğ‘–â‰¤ğ‘›1 çš„æ¯ä¸ªğ‘–ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:

```
1\. If 2ğ‘–+1 â‰¤ ğ‘›âˆ’1,then ğ‘ğ‘– < ğ‘(2ğ‘–+1).
2\. If 2ğ‘–+2 â‰¤ ğ‘›âˆ’1,then ğ‘ğ‘– < ğ‘(2ğ‘–+2).
```

è¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä¸åŒçš„ã€‚è¯·æ³¨æ„ï¼Œä»»ä½•é•¿åº¦ä¸è¶…è¿‡ 4ğ‘›çš„äº¤æ¢åºåˆ—ï¼Œåœ¨æ­¤ä¹‹åï¼Œæ‚¨çš„åˆå§‹æ•°ç»„æˆä¸ºæ­£ç¡®çš„å †ï¼Œéƒ½å°†è¢«è¯„å®šä¸ºæ­£ç¡®ã€‚

**æ ·å“ 1ã€‚**

**è¾“å…¥:**

```
5
5 4 3 2 1
```

**è¾“å‡º:**

```
3
1 4
0 1
1 3
```

**è¯´æ˜:**

```
After swapping elements 4 in position 1 and 1 in position 4 the array becomes 5 1 3 2 4.After swapping elements 5 in position 0 and 1 in position 1 the array becomes 1 5 3 2 4.After swapping elements 5 in position 1 and 2 in position 3 the array becomes 1 2 3 5 4, which is already a heap, because ğ‘0 =1 < 2 = ğ‘1, ğ‘0 =1 < 3=ğ‘2, ğ‘1=2 < 5=ğ‘3, ğ‘1=2 < 4=ğ‘4.
```

æ›´æ”¹è®²åº§ä¸­çš„ **BuildHeap** ç®—æ³•ï¼Œä»¥è€ƒè™‘**æœ€å°å †**è€Œä¸æ˜¯æœ€å¤§å †ï¼Œå¹¶è€ƒè™‘åŸºäº 0 çš„ç´¢å¼•ã€‚

## è§£å†³æ–¹æ¡ˆ:

åœ¨æ„å»ºå †æ—¶ï¼Œæˆ‘ä»¬å°†ä»ç¬¬ n/2 ä¸ªèŠ‚ç‚¹å‘ä¸‹åˆ°ç¬¬ 1 ä¸ªèŠ‚ç‚¹è¿›è¡Œ SiftDown æ“ä½œï¼Œä»¥ä¿®å¤å †æ¥æ»¡è¶³æœ€å°å †å±æ€§ã€‚æ¯æ¬¡äº¤æ¢èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è·Ÿè¸ªå®ƒã€‚

# é—®é¢˜ 2:å¹¶è¡Œå¤„ç†

åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ‚¨å°†æ¨¡æ‹Ÿä¸€ä¸ªå¹¶è¡Œå¤„ç†ä¸€ç³»åˆ—ä½œä¸šçš„ç¨‹åºã€‚åƒ Linuxã€MacOS æˆ– Windows è¿™æ ·çš„æ“ä½œç³»ç»Ÿéƒ½æœ‰ç‰¹æ®Šçš„ç¨‹åºï¼Œå«åšè°ƒåº¦ç¨‹åºï¼Œå®ƒå¯¹ä½ è®¡ç®—æœºä¸Šçš„ç¨‹åºåšåŒæ ·çš„äº‹æƒ…ã€‚

**é—®é¢˜æè¿°**

**ä»»åŠ¡ã€‚**æ‚¨æœ‰ä¸€ä¸ªå¹¶è¡ŒåŒ–çš„ç¨‹åºï¼Œå®ƒä½¿ç”¨ğ‘›ç‹¬ç«‹çº¿ç¨‹æ¥å¤„ç†ç»™å®šçš„ğ‘šä½œä¸šåˆ—è¡¨ã€‚çº¿ç¨‹æŒ‰ç…§è¾“å…¥ä¸­ç»™å‡ºçš„é¡ºåºæ¥å—ä»»åŠ¡ã€‚å¦‚æœæœ‰ç©ºé—²çº¿ç¨‹ï¼Œå®ƒä¼šç«‹å³ä»åˆ—è¡¨ä¸­è·å–ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹å·²ç»å¼€å§‹å¤„ç†ä¸€ä¸ªä½œä¸šï¼Œå®ƒä¸ä¼šä¸­æ–­æˆ–åœæ­¢ï¼Œç›´åˆ°å®ƒå®Œæˆå¤„ç†è¯¥ä½œä¸šã€‚å¦‚æœå‡ ä¸ªçº¿ç¨‹è¯•å›¾åŒæ—¶ä»åˆ—è¡¨ä¸­è·å–ä½œä¸šï¼Œç´¢å¼•è¾ƒå°çš„çº¿ç¨‹ä¼šè·å–ä½œä¸šã€‚å¯¹äºæ¯ä¸€ä¸ªä»»åŠ¡ï¼Œä½ ç¡®åˆ‡åœ°çŸ¥é“ä»»ä½•ä¸€ä¸ªçº¿ç¨‹å¤„ç†è¿™ä¸ªä»»åŠ¡éœ€è¦å¤šé•¿æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´å¯¹äºæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ‚¨éœ€è¦ä¸ºæ¯ä¸ªä½œä¸šç¡®å®šå“ªä¸ªçº¿ç¨‹å°†å¤„ç†å®ƒï¼Œä»¥åŠå®ƒä½•æ—¶å¼€å§‹å¤„ç†ã€‚

**è¾“å…¥æ ¼å¼ã€‚**è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•°ğ‘›å’Œğ‘š.

ç¬¬äºŒè¡ŒåŒ…å«ğ‘šæ•´æ•°ğ‘¡ğ‘–â€”â€”ä»»ä½•çº¿ç¨‹å¤„ç†ğ‘–-th ä½œä¸šæ‰€ç”¨çš„æ—¶é—´(ç§’)ã€‚æ—¶é—´çš„é¡ºåºä¸å®ƒä»¬åœ¨çº¿ç¨‹è·å–ä½œä¸šçš„åˆ—è¡¨ä¸­çš„é¡ºåºç›¸åŒã€‚

çº¿ç¨‹ä» 0 å¼€å§‹è¿›è¡Œç´¢å¼•ã€‚

**è¾“å‡ºæ ¼å¼ã€‚**å‡†ç¡®è¾“å‡ºğ‘šçº¿ã€‚ğ‘–-th è¡Œ(ä½¿ç”¨åŸºäº 0 çš„ç´¢å¼•)åº”è¯¥åŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°â€”â€”å°†å¤„ç†ğ‘–-th ä½œä¸šçš„çº¿ç¨‹çš„åŸºäº 0 çš„ç´¢å¼•å’Œå®ƒå°†å¼€å§‹å¤„ç†è¯¥ä½œä¸šçš„æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)ã€‚

**æ ·å“ 1ã€‚**

**è¾“å…¥:**

```
2 5 1 2 3 4 5
```

**è¾“å‡º:**

```
0 01 00 11 20 4
```

**è¯´æ˜:**

```
1\. The two threads try to simultaneously take jobs from the list, so thread with index 0 actually takes the first job and starts working on it at the moment 0.2\. The thread with index 1 takes the second job and starts working on it also at the moment 0.3\. After 1 second, thread 0 is done with the first job and takes the third job from the list, and starts processing it immediately at time 1.4\. One second later, thread 1 is done with the second job and takes the fourth job from the list, and starts processing it immediately at time 2.5\. Finally, after 2 more seconds, thread 0 is done with the third job and takes the fifth job from the list, and starts processing it immediately at time 4.
```

æƒ³æƒ³å½“å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ç©ºé—²æ—¶çš„äº‹ä»¶é¡ºåº(åœ¨å¼€å§‹æ—¶å’Œå®ŒæˆæŸä¸ªä»»åŠ¡å)ã€‚å¦‚ä½•åº”ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥æ¨¡æ‹ŸæŒ‰è¦æ±‚çš„é¡ºåºå¤„ç†è¿™äº›äº‹ä»¶ï¼Ÿè®°å¾—è€ƒè™‘å‡ ä¸ªçº¿ç¨‹åŒæ—¶ç©ºé—²çš„æƒ…å†µã€‚

åœ¨è¿™ä¸ªé—®é¢˜ä¸­è¦å°å¿ƒ integer over ow:åœ¨ C++ä¸­ä½¿ç”¨ long long ç±»å‹ï¼Œåœ¨ Java ä¸­ä½¿ç”¨ long ç±»å‹ï¼Œåªè¦æ­£åˆ™ç±»å‹ int èƒ½å¤Ÿè¦†ç›– owï¼Œå°±è¦è€ƒè™‘é—®é¢˜è¯­å¥ä¸­çš„é™åˆ¶ã€‚

## **è§£å†³æ–¹æ¡ˆ:**

è¿™ä¸ªæƒ³æ³•æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ¥ç•™ä½å·¥äººã€‚æˆ‘ä»¬é€šè¿‡çŠ¶æ€å’ŒæŒ‡æ•°æ¯”è¾ƒä¸¤ä¸ªå·¥äººã€‚è¦é€‰æ‹©ä¸‹ä¸€ä¸ªå·¥äººï¼Œæˆ‘ä»¬åªéœ€é€‰æ‹©æ ¹æœ€å°å †æ ‘ã€‚ä¸ºäº†è®©å®ƒå·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦æ”¹å˜æ ¹æ ‘å’Œä¿®å¤æ ‘çš„ä¼˜å…ˆçº§ã€‚

## é—®é¢˜ 3:åˆå¹¶è¡¨æ ¼

åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ‚¨çš„ç›®æ ‡æ˜¯æ¨¡æ‹Ÿæ•°æ®åº“ä¸­è¡¨çš„ä¸€ç³»åˆ—åˆå¹¶æ“ä½œã€‚

**é—®é¢˜æè¿°**

**ä»»åŠ¡ã€‚åœ¨æŸä¸ªæ•°æ®åº“ä¸­å­˜å‚¨æœ‰ğ‘›è¡¨ã€‚è¿™äº›æ¡Œå­ä» 1 åˆ°ğ‘›.ç¼–å·æ‰€æœ‰è¡¨å…±äº«åŒä¸€ç»„åˆ—ã€‚æ¯ä¸ªè¡¨åŒ…å«å‡ è¡Œå®é™…æ•°æ®æˆ–æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„ç¬¦å·é“¾æ¥ã€‚æœ€åˆï¼Œæ‰€æœ‰è¡¨éƒ½åŒ…å«æ•°æ®ï¼Œğ‘–-th è¡¨åŒ…å«ğ‘Ÿğ‘–è¡Œã€‚æ‚¨éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œçš„ğ‘š:**

1.è€ƒè™‘ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–).å·æ¡Œéå†ç¬¦å·é“¾æ¥çš„è·¯å¾„ä»¥è·å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–)åŒ…å«äº†è±¡å¾æ€§çš„è”ç³»è€Œä¸æ˜¯çœŸå®çš„æ•°æ® doğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–)â†symlink(ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–))

2.è€ƒè™‘è¡¨æ ¼ç¼–å·ğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–)å¹¶ä»å®ƒå¼€å§‹ä»¥ä¸ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–).ç›¸åŒçš„æ–¹å¼éå†ç¬¦å·é“¾æ¥çš„è·¯å¾„

3.ç°åœ¨ï¼Œğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›ğ‘–å’Œğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–)æ˜¯æœ‰çœŸå®æ•°æ®çš„ä¸¤ä¸ªè¡¨çš„æ•°å­—ã€‚å¦‚æœğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–)ï¼= ğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–)ï¼Œå°†ğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–è¡¨ä¸­çš„æ‰€æœ‰è¡Œå¤åˆ¶åˆ°ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–è¡¨ä¸­ï¼Œç„¶åæ¸…ç©ºğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–è¡¨ï¼Œå¹¶åœ¨å…¶ä¸­æ”¾ç½®ä¸€ä¸ªæŒ‡å‘ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–çš„ç¬¦å·é“¾æ¥ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„æ•°æ®ã€‚

4.æ‰“å°æ‰€æœ‰ğ‘›è¡¨ä¸­çš„æœ€å¤§å¤§å°(å›æƒ³ä¸€ä¸‹ï¼Œå¤§å°æ˜¯è¡¨ä¸­çš„è¡Œæ•°)ã€‚å¦‚æœè¡¨æ ¼åªåŒ…å«ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œåˆ™å…¶å¤§å°è¢«è®¤ä¸ºæ˜¯ 0ã€‚

**è¯·å‚è§ç¤ºä¾‹å’Œè§£é‡Šä»¥è·å¾—è¿›ä¸€æ­¥çš„è¯´æ˜ã€‚**

**è¾“å…¥æ ¼å¼ã€‚è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ğ‘›å’Œğ‘šâ€”â€”åˆ†åˆ«æ˜¯æ•°æ®åº“ä¸­è¡¨çš„æ•°é‡å’Œè¦æ‰§è¡Œçš„åˆå¹¶æŸ¥è¯¢çš„æ•°é‡ã€‚**

è¾“å…¥çš„ç¬¬äºŒè¡ŒåŒ…å«ğ‘›æ•´æ•°ğ‘Ÿğ‘–â€”â€”ğ‘–-th è¡¨ä¸­çš„è¡Œæ•°ã€‚

ç„¶åæŒ‰ç…§æè¿°åˆå¹¶æŸ¥è¯¢çš„ğ‘šçº¿ã€‚æ¯ä¸ªéƒ½åŒ…å«ä¸¤ä¸ªæ•´æ•°ğ‘‘ğ‘’ğ‘ ğ‘¡ğ‘–ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(ğ‘–å’Œğ‘ ğ‘œğ‘¢ğ‘Ÿğ‘ğ‘’(ğ‘–)â€”â€”è¦åˆå¹¶çš„è¡¨çš„ç¼–å·ã€‚

**è¾“å‡ºæ ¼å¼ã€‚**å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œæ‰“å°ä¸€è¡ŒåŒ…å«å•ä¸ªæ•´æ•°çš„å†…å®¹â€”â€”ç›¸åº”æ“ä½œåæ‰€æœ‰è¡¨çš„æœ€å¤§å¤§å°(æ ¹æ®è¡Œæ•°)ã€‚

**æ ·å“ 1ã€‚**

**è¾“å…¥:**

```
5 5 
1 1 1 1 1
3 5
2 4
1 4
5 4
5 3
```

**è¾“å‡º:**

```
2
2
3
5
5
```

**è¯´æ˜:**

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰çš„è¡¨æœ€åˆéƒ½åªæœ‰ä¸€è¡Œæ•°æ®ã€‚è€ƒè™‘åˆå¹¶æ“ä½œ:

1.è¡¨ 5 ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è¢«å¤åˆ¶åˆ°è¡¨ 3 ä¸­ã€‚è¡¨ 5 ç°åœ¨åªåŒ…å«ä¸€ä¸ªåˆ°è¡¨ 3 çš„ç¬¦å·é“¾æ¥ï¼Œè€Œè¡¨ 3 æœ‰ 2 è¡Œã€‚2 æˆä¸ºæ–°çš„æœ€å¤§å°ºå¯¸ã€‚

2.2 å’Œ 4 çš„åˆå¹¶æ–¹å¼ä¸ 3 å’Œ 5 ç›¸åŒã€‚

3.æˆ‘ä»¬æ­£åœ¨å°è¯•åˆå¹¶ 1 å’Œ 4ï¼Œä½†æ˜¯ 4 æœ‰ä¸€ä¸ªæŒ‡å‘ 2 çš„ç¬¦å·é“¾æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šæ˜¯å°† 2 å·è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®å¤åˆ¶åˆ° 1 å·è¡¨ä¸­ï¼Œæ¸…é™¤ 2 å·è¡¨å¹¶åœ¨å…¶ä¸­æ”¾ä¸€ä¸ªæŒ‡å‘ 1 å·è¡¨çš„ç¬¦å·é“¾æ¥ã€‚è¡¨ 1 ç°åœ¨æœ‰ 3 è¡Œæ•°æ®ï¼Œ3 æˆä¸ºæ–°çš„æœ€å¤§å¤§å°ã€‚

4.ä» 4 å¼€å§‹éå†ç¬¦å·é“¾æ¥çš„è·¯å¾„æˆ‘ä»¬æœ‰ 4â†’2â†’1ï¼Œä» 5 å¼€å§‹çš„è·¯å¾„æ˜¯ 5â†’3ã€‚æ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šåˆå¹¶äº†è¡¨ 3 å’Œè¡¨ 1ã€‚æˆ‘ä»¬å°† 1 å·è¡¨ä¸­çš„æ‰€æœ‰è¡Œå¤åˆ¶åˆ° 3 å·è¡¨ä¸­ï¼Œç°åœ¨ 3 å·è¡¨æœ‰ 5 è¡Œæ•°æ®ï¼Œè¿™æ˜¯æ–°çš„æœ€å¤§å€¼ã€‚

5.ç°åœ¨æ‰€æœ‰çš„è¡¨éƒ½ç›´æ¥æˆ–é—´æ¥åœ°æŒ‡å‘è¡¨ 3ï¼Œæ‰€ä»¥æ‰€æœ‰å…¶ä»–çš„åˆå¹¶ä¸ä¼šæ”¹å˜ä»»ä½•ä¸œè¥¿ã€‚

**æ ·å“ 2ã€‚**

**è¾“å…¥:**

```
6 4
10 0 5 0 3 3 
6 6
6 5
5 6
4 3
```

**è¾“å‡º:**

```
10 
10 
10 
11
```

**è§£é‡Š:**

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¡¨æ ¼å…·æœ‰ä¸åŒçš„å¤§å°ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹æ“ä½œ:

1.å°† 6 å·è¡¨ä¸å…¶è‡ªèº«åˆå¹¶ä¸ä¼šæ”¹å˜ä»»ä½•ä¸œè¥¿ï¼Œæœ€å¤§å¤§å°æ˜¯ 10(1 å·è¡¨)ã€‚

2.åœ¨å°†è¡¨å· 5 åˆå¹¶åˆ°è¡¨å· 6 ä¹‹åï¼Œè¡¨å· 5 è¢«æ¸…é™¤å¹¶ä¸”å¤§å°ä¸º 0ï¼Œè€Œè¡¨å· 6 çš„å¤§å°ä¸º 6ã€‚ä¸è¿‡ï¼Œæœ€å¤§å°ºå¯¸æ˜¯ 10ã€‚

3.é€šè¿‡å°† 4 å·è¡¨åˆå¹¶åˆ° 5 å·è¡¨ï¼Œæˆ‘ä»¬å®é™…ä¸Šå°† 4 å·è¡¨åˆå¹¶åˆ° 6 å·è¡¨(ç°åœ¨ 5 å·è¡¨åªåŒ…å«ä¸€ä¸ªåˆ° 6 å·è¡¨çš„ç¬¦å·é“¾æ¥)ï¼Œæ‰€ä»¥ 4 å·è¡¨è¢«æ¸…é™¤ï¼Œå¤§å°ä¸º 0ï¼Œè€Œ 6 å·è¡¨çš„å¤§å°ä¸º 6ã€‚ä¸è¿‡ï¼Œæœ€å¤§å°ºå¯¸æ˜¯ 10ã€‚

4.é€šè¿‡å°† 3 å·è¡¨åˆå¹¶åˆ° 4 å·è¡¨ï¼Œæˆ‘ä»¬å®é™…ä¸Šå°† 3 å·è¡¨åˆå¹¶åˆ° 6 å·è¡¨(4 å·è¡¨ç°åœ¨åªåŒ…å«ä¸€ä¸ªåˆ° 6 å·è¡¨çš„ç¬¦å·é“¾æ¥)ï¼Œæ‰€ä»¥ 3 å·è¡¨è¢«æ¸…é™¤ï¼Œå¤§å°ä¸º 0ï¼Œè€Œ 6 å·è¡¨çš„å¤§å°ä¸º 11ï¼Œè¿™æ˜¯æ–°çš„æœ€å¤§å¤§å°ã€‚

æ€è€ƒå¦‚ä½•ä½¿ç”¨å¸¦è·¯å¾„å‹ç¼©çš„ä¸ç›¸äº¤é›†åˆå¹¶å’ŒæŒ‰ç­‰çº§å¯å‘å¼çš„å¹¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ‚¨åº”è¯¥å°†æ‰§è¡Œ union/find æ“ä½œçš„æ•°æ®ç»“æ„ä»è¡¨çš„åˆå¹¶ä¸­åˆ†ç¦»å‡ºæ¥ã€‚å¦‚æœè¦æ±‚æ‚¨å°†ç¬¬ä¸€ä¸ªè¡¨åˆå¹¶åˆ°ç¬¬äºŒä¸ªè¡¨ä¸­ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªè¡¨çš„ç­‰çº§å°äºç¬¬ä¸€ä¸ªè¡¨çš„ç­‰çº§ï¼Œåˆ™åœ¨ä¸ç›¸äº¤é›†åˆè”åˆæ•°æ®ç»“æ„ä¸­è¿›è¡Œåˆå¹¶æ—¶ï¼Œæ‚¨å¯ä»¥å¿½ç•¥æ‰€è¯·æ±‚çš„é¡ºåºï¼Œè€Œæ˜¯åœ¨ä¸ç›¸äº¤é›†åˆè”åˆä¸­å°†å¯¹åº”äºç¬¬äºŒä¸ªè¡¨çš„èŠ‚ç‚¹è¿æ¥åˆ°å¯¹åº”äºç¬¬ä¸€ä¸ªè¡¨çš„èŠ‚ç‚¹ã€‚ä½†æ˜¯ï¼Œæ‚¨å°†éœ€è¦å­˜å‚¨å®é™…çš„ç¬¬äºŒä¸ªè¡¨çš„ç¼–å·ï¼Œæ‚¨è¢«è¯·æ±‚å°†ç¬¬ä¸€ä¸ªè¡¨åˆå¹¶åˆ°ç›¸åº”ä¸ç›¸äº¤é›†çš„çˆ¶èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ‚¨å°†éœ€è¦åœ¨ä¸ç›¸äº¤é›†è”åˆçš„èŠ‚ç‚¹ä¸­é™„åŠ ä¸€ä¸ª eld æ¥å­˜å‚¨å®ƒã€‚

## è§£å†³æ–¹æ¡ˆ:

æˆ‘ä»¬ä½¿ç”¨ ***çˆ¶*** æ•°ç»„æ¥å­˜å‚¨ä¸ç›¸äº¤é›†åˆã€‚

æˆ‘ä»¬ç”¨ ***è¡Œ*** æ•°ç»„æ¥å­˜å‚¨æ ¹ I çš„æœ€å¤§å€¼

æˆ‘ä»¬éœ€è¦ç”¨è€™é›†å’Œè·¯å¾„å‹ç¼©å¯å‘å¼å»ºç«‹ä¸ç›¸äº¤é›†ã€‚

## é˜…è¯»ææ–™:

å‚è§[CLRS] â€”ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„ç¬¬ 6.4 ç« 

å‚è§æ­¤[æœ€å°å †å¯è§†åŒ–](http://www.cs.usfca.edu/~galles/visualization/Heap.html)ã€‚

å‚è§[DPVo8] â€”ä¸ç›¸äº¤é›†çš„ç¬¬ 5.1.4 èŠ‚

å¦è¯·å‚è§æœ¬[æ•™ç¨‹](https://www.topcoder.com/community/data-science/data-science-tutorials/disjoint-set-data-structures/)ä¸­å…³äºä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„çš„å†…å®¹ã€‚

å¦è¯·å‚è§è¿™ä¸ªä¸ç›¸äº¤é›†åˆçš„[å¯è§†åŒ–](http://www.cs.usfca.edu/~galles/visualization/DisjointSets.html)ï¼Œæœ‰å’Œæ²¡æœ‰è·¯å¾„å‹ç¼©å’ŒæŒ‰ç­‰çº§è¯•æ¢æ³•è”åˆã€‚

## **å‚è€ƒæ–‡çŒ®:**

Sanjoy Dasguptaã€Christos Papadimitriou å’Œ Umesh Vaziraniã€‚ç®—æ³•(ç¬¬ä¸€ç‰ˆ)ã€‚éº¦æ ¼åŠ³-å¸Œå°”é«˜ç­‰æ•™è‚²ã€‚2008.

æ‰˜é©¬æ–¯Â·hÂ·ç§‘å°”æ›¼ï¼ŒæŸ¥å°”æ–¯Â·eÂ·è±ç‘Ÿæ£®ï¼Œç½—çº³å¾·Â·LÂ·æç»´æ–¯ç‰¹ï¼Œå…‹åˆ©ç¦å¾·Â·æ–¯å¦ã€‚ç®—æ³•å¯¼è®º(ç¬¬ä¸‰ç‰ˆ)ã€‚éº»çœç†å·¥å­¦é™¢å‡ºç‰ˆç¤¾å’Œéº¦æ ¼åŠ³-å¸Œå°”ã€‚2009.