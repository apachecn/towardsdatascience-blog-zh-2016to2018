<html>
<head>
<title>Building a co-occurrence matrix with d3 to analyze overlapping topics in dissertations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨d3æ„å»ºå…±ç°çŸ©é˜µåˆ†æå­¦ä½è®ºæ–‡ä¸­çš„é‡å ä¸»é¢˜</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/building-a-co-occurrence-matrix-with-d3-to-analyze-overlapping-topics-in-dissertations-fb2ae9470dee?source=collection_archive---------4-----------------------#2018-01-09">https://towardsdatascience.com/building-a-co-occurrence-matrix-with-d3-to-analyze-overlapping-topics-in-dissertations-fb2ae9470dee?source=collection_archive---------4-----------------------#2018-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8f2acc11200dcd4f98db8946051a149f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h3Uu78FiVsnI-GrgZ-3phQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Thanks <a class="ae kc" href="https://www.pexels.com/u/minan1398/" rel="noopener ugc nofollow" target="_blank">Min An</a>!</figcaption></figure><p id="e694" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ç¡•å£«å­¦ä½ç ”ç©¶çš„ç›®æ ‡æ˜¯<strong class="kf ir">åœ¨ä¸åŒé¢†åŸŸçš„ç ”ç©¶äººå‘˜ä¹‹é—´æ¿€å‘æ–°çš„åˆä½œæœºä¼š</strong>ã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘éœ€è¦åé€€ä¸€æ­¥ï¼Œçœ‹çœ‹<strong class="kf ir">æ˜¯å¦æœ‰ä»»ä½•åˆä½œå·²ç»å‘ç”Ÿ</strong>ã€‚é…·ï¼Œä½†æ˜¯å¦‚ä½•å¼€å§‹åšè¿™ä»¶äº‹å‘¢ï¼Ÿ</p><p id="f9db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“ä½œè€…ä¸ºä»–ä»¬çš„ä½œå“å†™æ‘˜è¦æ—¶ï¼Œä»–ä»¬ä¹Ÿä¼šæ·»åŠ ä¸€äº›å…³é”®è¯ã€‚æˆ‘çš„ç¬¬ä¸€ä¸ªçŒœæµ‹æ˜¯ï¼Œé€šè¿‡è¿™äº›å…³é”®è¯ï¼Œæˆ‘å¯ä»¥å¼€å§‹çœ‹åˆ°æ¥è‡ªä¸åŒçŸ¥è¯†é¢†åŸŸçš„è®ºæ–‡æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ã€‚</p><p id="d751" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">äºæ˜¯æˆ‘æŠŠè‡ªå·±å¤§å­¦(2016)çš„æ‰€æœ‰å­¦ä½è®ºæ–‡éƒ½æ‰¾æ¥ï¼Œæ„å»ºäº†ä¸€ä¸ªçŸ©é˜µï¼ŒæŠŠå…³é”®è¯é‡å çš„ä½œå“å¯è§†åŒ–ã€‚</p><p id="bb0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘æœ‰ä¸¤é¡¹ä¸»è¦å·¥ä½œ:<strong class="kf ir">è·å–æ•°æ®</strong>å’Œ<strong class="kf ir">æ„å»ºd3å¯è§†åŒ–</strong>ã€‚</p><h1 id="28b9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">1ï¸âƒ£â€”â€”è·å–æ•°æ®</h1><p id="4500" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æ¯æ¬¡å­¦ç”Ÿæ‹¿åˆ°å­¦ä½ï¼Œå¥¹éƒ½éœ€è¦æŠŠæœ€ç»ˆè®ºæ–‡å‘åˆ°è¿™ä¸ªç½‘ç«™:<a class="ae kc" href="http://repositorio.ufpe.br/" rel="noopener ugc nofollow" target="_blank">http://repositorio.ufpe.br/</a>ã€‚ä¸ºäº†ä»è¿™äº›è®ºæ–‡ä¸­è·å–å…³é”®è¯ï¼Œæˆ‘å¿…é¡»:</p><ol class=""><li id="60cc" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">è·å–æ‰€æœ‰å­¦ä½è®ºæ–‡çš„åˆ—è¡¨</li><li id="f638" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">ä¸‹è½½pdfæ–‡ä»¶</li><li id="df5d" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">æå–æ–‡æœ¬å¹¶è·å¾—æ¯ç¯‡è®ºæ–‡çš„å…³é”®è¯</li></ol><h2 id="1cf7" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">ğŸ“1 â€”è·å–æ‰€æœ‰è®ºæ–‡çš„åˆ—è¡¨</h2><p id="fb08" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">å¤šäºäº†Scrapyï¼Œè¿™éƒ¨åˆ†æ¯”æˆ‘æƒ³è±¡çš„è¦å®¹æ˜“å¾—å¤šã€‚ä¸ºäº†ç”¨æ¡†æ¶ä»ç½‘ç«™ä¸­æå–æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªèœ˜è››ã€‚</p><blockquote class="ne nf ng"><p id="e8e5" class="kd ke nh kf b kg kh ki kj kk kl km kn ni kp kq kr nj kt ku kv nk kx ky kz la ij bi translated">â€œèœ˜è››æ˜¯ä½ å®šä¹‰çš„ç±»ï¼ŒScrapyç”¨å®ƒä»ä¸€ä¸ªç½‘ç«™(æˆ–ä¸€ç»„ç½‘ç«™)æŠ“å–ä¿¡æ¯ã€‚â€<a class="ae kc" href="https://doc.scrapy.org/en/latest/intro/tutorial.html#our-first-spider" rel="noopener ugc nofollow" target="_blank">æ¥æº</a></p></blockquote><p id="e033" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨Spiderç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†åŸºæœ¬URLï¼ŒScrapyåº”è¯¥å¦‚ä½•å¤„ç†åˆ†é¡µï¼Œè¿˜å®šä¹‰äº†å°†è¦æå–çš„æ•°æ®ã€‚</p><figure class="nl nm nn no gt jr"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="babb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å¾—åˆ°äº†è¿™ä¸ªå…ƒæ•°æ®:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="4289" class="ms lc iq ns b gy nw nx l ny nz">{            <br/>'author',<br/>'title',<br/>'date':            <br/>'abstract',            <br/>'research_field',            <br/>'url_to_pdf'     <br/>}</span></pre><h2 id="aecb" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">ğŸ“2-ä¸‹è½½pdf</h2><p id="9f72" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘æ„å»ºäº†ä¸€ä¸ªpythonè„šæœ¬ï¼Œä½¿ç”¨<a class="ae kc" href="http://docs.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">è¯·æ±‚</a>ã€<em class="nh">ä¸€ä¸ªä¼˜é›…è€Œç®€å•çš„Python HTTPåº“ï¼Œä¸ºäººç±»è€Œå»º</em>ã€‚</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="29fa" class="ms lc iq ns b gy nw nx l ny nz">with open(new_file_name, 'wb') as pdf:<br/>    temp = requests.get("<a class="ae kc" href="http://repositorio.ufpe.br" rel="noopener ugc nofollow" target="_blank">http://repositorio.ufpe.br</a>" + link, stream=True)<br/>    for block in temp.iter_content(512):<br/>        if not block:<br/>            break</span><span id="b959" class="ms lc iq ns b gy oa nx l ny nz">pdf.write(block)</span></pre><h2 id="d20a" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">ğŸ”¡3 â€”æå–æ–‡æœ¬å¹¶è·å¾—æ¯ç¯‡è®ºæ–‡çš„å…³é”®è¯</h2><p id="95c3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">å¯¹äºè¿™ä¸ªä»»åŠ¡ï¼Œæˆ‘ä½¿ç”¨äº†<a class="ae kc" href="https://github.com/mstamy2/PyPDF2" rel="noopener ugc nofollow" target="_blank"> PyPDF2 </a>å’Œ<a class="ae kc" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">ç©ºé—´</a>ã€‚é€šå¸¸ä½œè€…æŠŠå…³é”®è¯æ”¾åœ¨æ‘˜è¦ä¸‹é¢ï¼Œæ‰€ä»¥æˆ‘æµè§ˆPDFçš„é¡µé¢ï¼Œå¦‚æœæˆ‘æ‰¾åˆ°åƒâ€œå…³é”®è¯â€å’Œâ€œ<em class="nh"> palavras-chave </em>â€(åœ¨è‘¡è„ç‰™è¯­ä¸­æ˜¯å…³é”®è¯çš„æ„æ€)è¿™æ ·çš„è¯ï¼Œæˆ‘ä¼šæŠŠå†…å®¹ä¿å­˜åœ¨ä¸€ä¸ªtxtæ–‡ä»¶ä¸­ã€‚</p><p id="ac8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä½¿ç”¨spaCyæ¥æ ‡è®°æ–‡æœ¬ï¼Œå› ä¸ºPDFæå–å¹¶ä¸å®Œç¾ã€‚</p><p id="fa1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨è¿™ä¸ªè¿‡ç¨‹ä¹‹åï¼Œæˆ‘å¾—åˆ°äº†åŒ…å«â€œå…³é”®è¯â€çš„æ¯ä¸€é¡µçš„æ–‡æœ¬ã€‚ä¸ºäº†åªå¾—åˆ°å…³é”®è¯æœ¬èº«ï¼Œæˆ‘éå†å•è¯ï¼Œå¾—åˆ°æ‰€æœ‰è·Ÿåœ¨â€œå…³é”®è¯â€åé¢çš„å•è¯ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯é¡µé¢ä¸­çš„æœ€åä¸€é¡¹ã€‚ç„¶åï¼Œæˆ‘æœ€åå°†æ•°æ®åŠ è½½åˆ°dataframeä¸­è¿›è¡Œä¸€äº›è½¬æ¢ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°csvæ–‡ä»¶ä¸­ã€‚</p><h2 id="5cda" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">å…³é”®è¯å¯¹æˆ‘æƒ³åšçš„äº‹æƒ…æœ‰å¥½å¤„å—ï¼Ÿ</h2><p id="9e91" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘æ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå…³é”®å­—å¯èƒ½éå¸¸æ™®é€šã€‚å¦‚æœæˆ‘çš„ç›®æ ‡æ˜¯æ£€æŸ¥ä¸åŒç ”ç©¶é¢†åŸŸçš„ä¸»é¢˜å¦‚ä½•ç›¸äº’ä½œç”¨ï¼Œæˆ‘åº”è¯¥åˆ†ææ‘˜è¦ï¼Œå› ä¸ºåœ¨é‚£é‡Œæœ‰æ›´å¤šçš„æœºä¼šæ‰¾åˆ°ç›¸äº’ä½œç”¨çš„ç‚¹ã€‚</p><p id="4c99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªçœŸå®çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚å¯¹äºæœ¬è®ºæ–‡:â€œ<a class="ae kc" href="http://repositorio.ufpe.br/bitstream/handle/123456789/17872/Disserta%C3%A7%C3%A3o%20Emily%20%20Gai%C3%A3o%20e%20Albuquerque%20%28vers%C3%A3o%20definitiva%29.pdf?sequence=1&amp;isAllowed=y,Disserta%C3%A7%C3%A3o%20Emily%20%20Gai%C3%A3o%20e%20Albuquerque%20%28vers%C3%A3o%20definitiva%29" rel="noopener ugc nofollow" target="_blank">å†œæ°‘å·¥å¤§å­¦ç”Ÿé€‚åº”ä¸­çš„è®¤çŸ¥å’Œéè®¤çŸ¥æ–¹é¢</a>â€çš„å…³é”®è¯æ˜¯:</p><ul class=""><li id="309f" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la ob mk ml mm bi translated">å­¦æœ¯ç»å†</li><li id="0c90" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la ob mk ml mm bi translated">å¼¹æ€§</li><li id="a3fd" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la ob mk ml mm bi translated">æ‰§è¡ŒèŒèƒ½</li><li id="ded2" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la ob mk ml mm bi translated">è®ºè¯</li><li id="c10d" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la ob mk ml mm bi translated">å¤§å­¦ç”Ÿ</li></ul><p id="6c20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½†åœ¨é˜…è¯»æ‘˜è¦æ—¶ï¼Œæˆ‘å‘ç°äº†è¿™ä¸ª:</p><blockquote class="ne nf ng"><p id="a7e8" class="kd ke nh kf b kg kh ki kj kk kl km kn ni kp kq kr nj kt ku kv nk kx ky kz la ij bi translated">â€œä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼Œè¿›è¡Œäº†ä»¥ä¸‹åˆ†æ:æè¿°æ€§ç»Ÿè®¡ã€Tæ£€éªŒã€æ–¹å·®åˆ†æ(ANOVA)ã€ç›¸å…³æ¢ç´¢æ€§åŒå˜é‡åˆ†æã€æ¢ç´¢æ€§å› å­åˆ†æå’Œå¤šå…ƒçº¿æ€§å›å½’ã€‚â€</p></blockquote><p id="96bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ç¯‡è®ºæ–‡æ¥è‡ªè®¤çŸ¥å¿ƒç†å­¦çš„ç ”ç©¶ç”Ÿé¡¹ç›®ï¼Œä½†å®ƒçš„ä¸»é¢˜æ¥è‡ªç»Ÿè®¡å­¦ï¼Œä¹Ÿå¯èƒ½æ¥è‡ªè®¡ç®—æœºç§‘å­¦ï¼Œå¯¹å—ï¼Ÿå…³é”®å­—ä¸èƒ½æ˜¾ç¤ºè¿™ä¸€ç‚¹ã€‚å› æ­¤ï¼Œæˆ‘çš„ä¸‹ä¸€æ­¥å°†æ˜¯åˆ©ç”¨æ‘˜è¦ä¸­çš„æ–‡æœ¬å»ºç«‹ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p><p id="db0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½†æ˜¯æˆ‘ä»¬éœ€è¦ä»æŸä¸ªåœ°æ–¹å¼€å§‹ï¼Œæ‰€ä»¥æˆ‘åšäº†ä¸€äº›ç®€å•çš„äº‹æƒ…:ä»æ¯ä¸ªç ”ç©¶é¢†åŸŸå¾—åˆ°å‰10ä¸ªå…³é”®è¯ï¼Œæˆ‘å‡è®¾è¿™äº›è¯å¯ä»¥ç”¨æ¥æè¿°è¿™ä¸ªé¢†åŸŸã€‚</p><blockquote class="oc"><p id="3002" class="od oe iq bd of og oh oi oj ok ol la dk translated">é¦–å…ˆå»åšï¼Œç„¶ååšå¯¹ï¼Œç„¶ååšå¾—æ›´å¥½â€”â€”è‰¾è¿ªÂ·osmaniâ€</p></blockquote><p id="e089" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å§‹æ„å»ºå¯è§†åŒ–ã€‚</p><h1 id="4498" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">2ï¸âƒ£â€”â€”æ„å»ºå¯è§†åŒ–</h1><p id="3447" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨<a class="or os ep" href="https://medium.com/u/c918c478bb49?source=post_page-----fb2ae9470dee--------------------------------" rel="noopener" target="_blank">è¿ˆå…‹Â·åšæ–¯æ‰˜å…‹</a> <a class="ae kc" href="https://bost.ocks.org/mike/miserables/" rel="noopener ugc nofollow" target="_blank">æ‚²æƒ¨ä¸–ç•Œå…±ç°çŸ©é˜µ</a>ä½œä¸ºæˆ‘ä»¬çš„â€œæ¨¡æ¿â€ã€‚è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªçŸ©å½¢ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°èƒŒæ™¯ä¸­:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="f954" class="ms lc iq ns b gy nw nx l ny nz">var margin = {<br/>        top: 285,<br/>        right: 0,<br/>        bottom: 10,<br/>        left: 285<br/>    },<br/>    width = 700,<br/>    height = 700;<br/>var svg = d3.select("graph").append("svg").attr("width", width).attr("height", height);</span><span id="2d14" class="ms lc iq ns b gy oa nx l ny nz">svg.append("rect")<br/>    .attr("class", "background")<br/>    .attr("width", width - margin.right)<br/>    .attr("height", height - margin.top)<br/>    .attr("transform", "translate(" + margin.right + "," + margin.top + ")");</span><span id="45f9" class="ms lc iq ns b gy oa nx l ny nz">svg.append("rect")<br/>    .attr("class", "background")<br/>    .attr("width", width)<br/>    .attr("height", height);</span></pre><p id="58ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ·±å…¥äº†è§£d3çš„é­”åŠ›äº†ã€‚</p><h2 id="851e" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">1-è½¬æ¢æ•°æ®</h2><p id="a373" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æ•°æ®çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="2292" class="ms lc iq ns b gy nw nx l ny nz">{<br/>    "nodes": [{<br/>            "group": "humanas",<br/>            "index": 0,<br/>            "name": "ADMINISTRAÃ‡ÃƒO"<br/>        },<br/>        {<br/>            "group": "humanas",<br/>            "index": 1,<br/>            "name": "ANTROPOLOGIA"<br/>        },<br/>        [...]<br/>    ],<br/>    "links": [{<br/>            "source": 0,<br/>            "target": 0,<br/>            "value": 0.0<br/>        }, {<br/>            "source": 0,<br/>            "target": 1,<br/>            "value": 2.0<br/>        }, <br/>        [...]<br/>    ]<br/>}</span></pre><p id="19d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å°†é€è¡Œæ„å»ºçŸ©é˜µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¯»å–æ•°æ®å¹¶ä¸ºæ¯ä¸€è¡Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="465a" class="ms lc iq ns b gy nw nx l ny nz">d3.json("data/data.json", function(data) {<br/>    var matrix = [];<br/>    var nodes = data.nodes;<br/>    var total_items = nodes.length;</span><span id="37d6" class="ms lc iq ns b gy oa nx l ny nz">// Create rows for the matrix<br/>    nodes.forEach(function(node) {<br/>        node.count = 0;<br/>        node.group = groupToInt(node.group);</span><span id="8278" class="ms lc iq ns b gy oa nx l ny nz">matrix[node.index] = d3.range(total_items).map(item_index =&gt; {<br/>            return {<br/>                x: item_index,<br/>                y: node.index,<br/>                z: 0<br/>            };<br/>        });<br/>    });<br/>    // Fill matrix with data from links and count how many times each item appears<br/>    data.links.forEach(function(link) {<br/>        matrix[link.source][link.target].z += link.value;<br/>        matrix[link.target][link.source].z += link.value;<br/>        nodes[link.source].count += link.value;<br/>        nodes[link.target].count += link.value;<br/>    });</span><span id="f204" class="ms lc iq ns b gy oa nx l ny nz">});</span></pre><p id="cd85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å› ä¸ºæˆ‘ä»¬å°†é€è¡Œæ„å»ºæ–¹å—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æµè§ˆæ¯ä¸€è¡Œï¼Œç„¶åæµè§ˆæ¯ä¸€åˆ—ã€‚</p><h2 id="84f8" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">2-æ”¾ç½®æ­£æ–¹å½¢å¹¶æ·»åŠ é¢œè‰²</h2><p id="73d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ä¸ºäº†å°†æ¯ä¸ªæ–¹å—æ”¾ç½®åœ¨æ­£ç¡®çš„ä½ç½®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨d3.scaleBand()æ ‡å°ºã€‚è¿™ä¸ªscaleçš„ä½œç”¨æ˜¯è·å¾—ä¸€ä¸ªåŒ…å«å€¼çš„æ•°ç»„ï¼Œç„¶åä¸ºæ¯ä¸ªæ•°ç»„é¡¹åˆ†é…ä¸€ä¸ªåæ ‡ã€‚æ¯ä¸ªé¡¹ç›®çš„æ‰€æœ‰åæ ‡åŠ ä¸Šå¸¦å®½å€¼åŠ èµ·æ¥å°±æ˜¯æ€»å®½åº¦ã€‚</p><figure class="nl nm nn no gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/fad26a3a097352c9a6a2a90f872ca314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*bw5dpQvRxAjmNtF61kEdHA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">How d3.scaleBand() words</figcaption></figure><p id="c0b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ä¸ªè§„æ¨¡ä»¤äººæ•¬ç•ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦æ‰‹å·¥è®¡ç®—ã€‚</p><p id="2c11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¦ç»™æ¯ä¸ªæ–¹å—æ·»åŠ é¢œè‰²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨d3.schemeCategory20æ ‡åº¦ã€‚</p><p id="c1f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ˜¯å¤§é‡çš„æ–°ä»£ç ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="22e9" class="ms lc iq ns b gy nw nx l ny nz">d3.json("data/data.json", function(data) {</span><span id="a4fc" class="ms lc iq ns b gy oa nx l ny nz">[...] //transform the data</span><span id="84c5" class="ms lc iq ns b gy oa nx l ny nz">var matrixScale = d3.scaleBand().range([0, width]).domain(d3.range(total_items));<br/>var opacityScale = d3.scaleLinear().domain([0, 10]).range([0.3, 1.0]).clamp(true);<br/>var colorScale = d3.scaleOrdinal(d3.schemeCategory20);</span><span id="3c47" class="ms lc iq ns b gy oa nx l ny nz">// Draw each row (translating the y coordinate) <br/>    var rows = svg.selectAll(".row")<br/>        .data(matrix)<br/>        .enter().append("g")<br/>        .attr("class", "row")<br/>        .attr("transform", (d, i) =&gt; {<br/>            return "translate(0," + matrixScale(i) + ")";<br/>        });</span><span id="7079" class="ms lc iq ns b gy oa nx l ny nz">var squares = rows.selectAll(".cell")<br/>        .data(d =&gt; d.filter(item =&gt; item.z &gt; 0))<br/>        .enter().append("rect")<br/>        .attr("class", "cell")<br/>        .attr("x", d =&gt; matrixScale(d.x))<br/>        .attr("width", matrixScale.bandwidth())<br/>        .attr("height", matrixScale.bandwidth())<br/>        .style("fill-opacity", d =&gt; opacityScale(d.z)).style("fill", d =&gt; {<br/>            return nodes[d.x].group == nodes[d.y].group ? colorScale(nodes[d.x].group) : "grey";<br/>        })<br/>        .on("mouseover", mouseover)<br/>        .on("mouseout", mouseout);<br/>});</span></pre><p id="1374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ªæ¯”ä¾‹æ¥è®¾ç½®æ¯ä¸ªæ–¹å—çš„ä¸é€æ˜åº¦ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸é€æ˜åº¦å€¼æ˜¯æœ‰è‡³å°‘ä¸€ä¸ªå…³é”®å­—åŒ¹é…çš„è®ºæ–‡çš„æ•°é‡ã€‚ä¸€ä¸ªå…³é”®è¯åŒ¹é…æ„å‘³ç€ä¸€ä¸ªå…³é”®è¯åŒæ—¶å‡ºç°åœ¨ä¸¤ç¯‡è®ºæ–‡ä¸­ã€‚</p><h2 id="12ba" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">3-æ·»åŠ åˆ—</h2><p id="b92c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å¯¹è¡Œåšäº†åŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ—‹è½¬å®ƒä»¬:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="b1d5" class="ms lc iq ns b gy nw nx l ny nz">d3.json("data/data.json", function(data) {<br/>    <br/>   [...] //transform the data</span><span id="3b4f" class="ms lc iq ns b gy oa nx l ny nz">   [...] //place the squares and add color</span><span id="011d" class="ms lc iq ns b gy oa nx l ny nz">var columns = svg.selectAll(".column")<br/>        .data(matrix)<br/>        .enter().append("g")<br/>        .attr("class", "column")<br/>        .attr("transform", (d, i) =&gt; {<br/>            return "translate(" + matrixScale(i) + ")rotate(-90)";<br/>        });<br/>});</span></pre><h2 id="1aec" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">4-æ·»åŠ æ–‡æœ¬æ ‡ç­¾</h2><p id="00fd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ä¸ºäº†æ·»åŠ å ä½ç¬¦ï¼Œæˆ‘ä»¬ä½¿ç”¨è¡Œå’Œåˆ—é€‰æ‹©æ¥æ·»åŠ ä¸€ä¸ªsvgæ–‡æœ¬å…ƒç´ ã€‚</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="a516" class="ms lc iq ns b gy nw nx l ny nz">d3.json("data/data.json", function(data) {<br/>    <br/>    [...] //transform the data</span><span id="8604" class="ms lc iq ns b gy oa nx l ny nz">    [...] //place the squares and add color</span><span id="4037" class="ms lc iq ns b gy oa nx l ny nz">    [...] //add columns</span><span id="82f6" class="ms lc iq ns b gy oa nx l ny nz">rows.append("text")<br/>        .attr("class", "label")<br/>        .attr("x", -5)<br/>        .attr("y", matrixScale.bandwidth() / 2)<br/>        .attr("dy", ".32em")<br/>        .attr("text-anchor", "end")<br/>        .text((d, i) =&gt; capitalize_Words(nodes[i].name));<br/>  <br/>    columns.append("text")<br/>        .attr("class", "label")<br/>        .attr("y", 100)<br/>        .attr("y", matrixScale.bandwidth() / 2)<br/>        .attr("dy", ".32em")<br/>        .attr("text-anchor", "start")<br/>        .text((d, i) =&gt; capitalize_Words(nodes[i].name));<br/>});</span></pre><h2 id="d585" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">5-æ·»åŠ æ’åºåŠŸèƒ½</h2><p id="bd42" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">é‡æ–°ç»„ç»‡çŸ©é˜µè¡Œæœ‰åŠ©äºåˆ†æã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å­—æ¯é¡ºåºã€æ¯ä¸ªé¡¹ç›®(å³ç ”ç©¶é¢†åŸŸ)çš„è¿æ¥æ•°é‡ä»¥åŠæ¯ä¸ªçŸ¥è¯†é¢†åŸŸçš„èšç±»æ¥ç»„ç»‡å®ƒä»¬ã€‚ä½¿ç”¨d3.scaleBand()çŸ©é˜µå¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p id="cad8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ•°ç»„çš„æ¯ä¸€é¡¹éƒ½å¯¹åº”ä¸€ä¸ªç¨‹åºidï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ä»¥ä¸åŒçš„æ–¹å¼å¯¹æ•°ç»„æ’åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ¯ä¸ªçŸ©é˜µæ–¹å—ä¸åŒçš„åæ ‡ã€‚</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="c655" class="ms lc iq ns b gy nw nx l ny nz">// Precompute the orders.<br/>var orders = {<br/>    name: d3.range(total_items).sort((a, b) =&gt; {<br/>        return d3.ascending(nodes[a].name, nodes[b].name);<br/>    }),<br/>    count: d3.range(total_items).sort((a, b) =&gt; {<br/>        return nodes[b].count - nodes[a].count;<br/>    }),<br/>    group: d3.range(total_items).sort((a, b) =&gt; {<br/>        return nodes[b].group - nodes[a].group;<br/>    })<br/>};</span></pre><p id="510e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶åï¼Œæˆ‘ä»¬å‘html selectæ ‡è®°æ·»åŠ åŠŸèƒ½:</p><pre class="nl nm nn no gt nr ns nt nu aw nv bi"><span id="06dc" class="ms lc iq ns b gy nw nx l ny nz">d3.select("#order").on("change", function() {<br/>    changeOrder(this.value);<br/>});</span><span id="07ee" class="ms lc iq ns b gy oa nx l ny nz">function changeOrder(value) {<br/>        matrixScale.domain(orders[value]);<br/>        var t = svg.transition().duration(2000);<br/>      <br/>        t.selectAll(".row")<br/>            .delay((d, i) =&gt; matrixScale(i) * 4)<br/>            .attr("transform", function(d, i) {<br/>                return "translate(0," + matrixScale(i) + ")";<br/>            })<br/>            .selectAll(".cell")<br/>            .delay(d =&gt; matrixScale(d.x) * 4)<br/>            .attr("x", d =&gt; matrixScale(d.x));<br/>      <br/>        t.selectAll(".column")<br/>            .delay((d, i) =&gt; matrixScale(i) * 4)<br/>            .attr("transform", (d, i) =&gt; "translate(" + matrixScale(i) + ")rotate(-90)");<br/>    }</span></pre><p id="fec2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†å¢åŠ ä¸€ä¸ªå¥½çš„æ•ˆæœï¼Œæˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªåŠ¨ç”»çš„è½¬æ¢ã€‚</p><figure class="nl nm nn no gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ou"><img src="../Images/f393665e71d24195c86b4f28367776f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*on1H1gOmktArurEGHbGrKA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The final result</figcaption></figure><p id="11ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å°±æ˜¯è¿™æ ·ï¼ç°åœ¨æˆ‘ä»¬åªæ˜¯æ·»åŠ ä¸€äº›ç™½çº¿ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–¹å—æ·»åŠ ä¸€ä¸ªå·¥å…·æç¤ºã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æœ€ç»ˆç»“æœ<a class="ae kc" href="http://bl.ocks.org/dmesquita/raw/5abae723e08fade117ae98faa7317d1d/" rel="noopener ugc nofollow" target="_blank">æˆ–è€…åœ¨è¿™é‡Œ</a>æŸ¥çœ‹æœ€ç»ˆä»£ç <a class="ae kc" href="https://gist.github.com/dmesquita/5abae723e08fade117ae98faa7317d1d" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><p id="9970" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œç°åœ¨æˆ‘éœ€è¦åšçš„æ˜¯å¦‚ä½•æ˜¾ç¤ºå…³é”®è¯å’Œè®ºæ–‡ã€‚å½“ç„¶ï¼Œæˆ‘ä¼šå›åˆ°è¿™é‡Œä¸ä½ åˆ†äº«ï¼Œå“ˆå“ˆ</p><p id="7a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜</p><p id="283a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©å—ï¼Ÿæˆ‘å°½åŠ›æ¯ä¸ªæœˆå†™ä¸€ç¯‡æ·±å…¥çš„æ–‡ç« ï¼Œå½“æˆ‘å‘è¡¨æ–°çš„æ–‡ç« æ—¶ï¼Œä½ å¯ä»¥æ”¶åˆ°ç”µå­é‚®ä»¶ã€‚</p></div></div>    
</body>
</html>