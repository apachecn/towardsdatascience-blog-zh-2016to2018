# åœ¨å‘½ä»¤è¡Œä¸­æ¢ç´¢ç¾å›½å¤§å­¦æ’å 2017(ç¬¬ä¸‰éƒ¨åˆ†â€”â€”å‰ªåˆ‡ã€æ’åºå’Œ uniq)

> åŸæ–‡ï¼š<https://towardsdatascience.com/the-us-university-ranks-2017-at-the-command-line-part-iii-cut-sort-and-uniq-1a81dc0279c2?source=collection_archive---------9----------------------->

![](img/5f3ecdb852c52156ee3ec6ebf53d5428.png)

Image adopted and modified from the unsplash.com

å„ä½ç¼–ç å‘˜å¥½ï¼æ¬¢è¿å›åˆ°æˆ‘çš„ç³»åˆ—è¯¾ç¨‹**æ•°æ®ç§‘å­¦@ Bash Shell** ã€‚åœ¨è¿™ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬è¦è®¡ç®—ç¾å›½å„å·åœ¨æ•°æ®é›†ä¸­æœ‰å¤šå°‘æœºæ„è¢«æ’åã€‚

æ‚¨åº”è¯¥ä»ä¸‹é¢çš„ç½‘é¡µä¸‹è½½æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ç¨å¾®ç®€åŒ–äº†æ•°æ®ï¼Œè®©æˆ‘ä»¬å°†æ•°æ®ä¿å­˜ä¸º:`unirank.csv`

```
wget https://www.scientificprogramming.io/datasets/unirank.csv
```

# æŸ¥æ‰¾æ¯ä¸ªå·çš„å­¦é™¢æ•°é‡

è®©æˆ‘ä»¬ä»æå–æ¯ä¸€è¡Œä¸­ä¸æˆ‘ä»¬ç›¸å…³çš„éƒ¨åˆ†å¼€å§‹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ³¨æ„æˆ‘ä»¬å¯¹åˆ—`#1`å’Œ`3`(åˆ†åˆ«æ˜¯`university`å’Œ`state`çš„åç§°)æ„Ÿå…´è¶£ã€‚ä¸ºäº†æå–è¿™äº›åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åä¸º`cut`çš„å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
$ cat unirank.csv | cut -f1,3 -d,
```

è¿™é‡Œï¼Œå‘½ä»¤è¡Œé€‰é¡¹`-f`æŒ‡å®šä»æ–‡ä»¶ä¸­æå–å“ªä¸ªå­—æ®µ(åˆ—)æˆ–`cut`(æå–)ï¼Œé€‰é¡¹(`d,`)å‘Šè¯‰æˆ‘ä»¬è¦ç”¨é€—å·(`,`)åˆ†éš”åˆ‡å‰²ã€‚å½“æ‚¨è¿è¡Œè¯¥å‘½ä»¤æ—¶ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°è¾“å‡ºåªåŒ…å«è¯¸å¦‚ university `names`å’Œ`states`è¿™æ ·è¡Œã€‚æ³¨æ„ï¼Œå°½ç®¡åç§°å¦‚æ­¤ï¼Œ`cut`å‘½ä»¤å¹¶ä¸ä¿®æ”¹å®ƒæ‰€ä½œç”¨çš„åŸå§‹æ–‡ä»¶ã€‚ç°åœ¨åˆ°æœ€åä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬æƒ³æ•°ä¸€ä¸‹æ¯ä¸ªå·æœ‰å¤šå°‘è­¦å¯Ÿã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œæ²¡æœ‰ä¸€ä¸ªå‘½ä»¤å¯ä»¥åšåˆ°è¿™ä¸€åˆ‡ï¼›æˆ‘ä»¬å°†ä¸å¾—ä¸ä½¿ç”¨ä¸¤ä¸ªå‘½ä»¤ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦å‘½ä»¤`uniq -c`æ¥è®¡ç®—(å› æ­¤ä½¿ç”¨`-c`)æ¯ä¸ªçŠ¶æ€æœ‰å¤šå°‘ä¸ªç‹¬ç‰¹çš„å¤–è§‚ã€‚ä½†æ˜¯ï¼Œ`uniq -c`éœ€è¦å¯¹è¾“å…¥è¿›è¡Œæ’åºï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯`sort`å¤§å­¦å’Œå·çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä¸€ä¸ªå«åš`sort`çš„å‘½ä»¤æ¥åšåˆ°è¿™ä¸€ç‚¹:

```
$ cat unirank.csv | cut -f1,3 -d, | sort -k 2 -tâ€,â€
```

`sort`é€‰é¡¹:`k 2`å‘Šè¯‰æ’åºå‡½æ•°é€‰æ‹©åˆ—`2`ä½œä¸ºé”®ï¼Œ`tâ€,â€`é€‰é¡¹å‘Šè¯‰åˆ†éš”ç¬¦æ˜¯é€—å·(`,`)ã€‚

![](img/07bdd8a086a84ff0e517e7c6118dd0b8.png)

Output: Institutes sorted by states

æ³¨æ„ï¼Œä½œä¸ºæˆ‘ä»¬çš„åˆ—è¡¨è¢«æ’åºçš„ç»“æœï¼Œæ‰€æœ‰å…·æœ‰ç›¸åŒçŠ¶æ€çš„è¡Œéƒ½ç´§æŒ¨ç€å½¼æ­¤ã€‚ç°åœ¨ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„è®¡åˆ’ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`uniq -c`æ¥â€œæµ“ç¼©â€ç›¸åŒçš„ç›¸é‚»è¡Œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æ¯ä¸€è¡Œæœ‰å¤šå°‘è¢«çœ‹åˆ°:

```
$ cat unirank.csv | cut -f3 -d, | sort | uniq -c
```

![](img/82a643e916a7827483536c585de534b3.png)

Output: Institutes in the CA (California) state.

æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—å‡ºäº†æ¯ä¸ªå·æœ‰å¤šå°‘å¤§å­¦ï¼Œå¾ˆæ˜æ˜¾ï¼Œç»å¤§å¤šæ•°æ’åæœºæ„æ¥è‡ªåŠ åˆ©ç¦å°¼äºšå·ï¼

# æ‰¾åˆ°æ’åå’Œå­¦è´¹çš„ç›¸å…³æ€§ï¼Ÿ

æˆ‘ä»¬å·²ç»çŸ¥é“æ’åå’Œæ¯æ‰€å¤§å­¦çš„å­¦è´¹(åœ¨æ•°æ®ä¸­ç»™å‡º)ã€‚ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜æ˜¯ç ”ç©¶å¤§å­¦æ’åå’Œå­¦è´¹ä¹‹é—´çš„å…³ç³»ã€‚

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆå°†`cat`å’Œ`cut`æ•°æ®ä¸­çš„**å­¦æ‚è´¹**(åˆ—`4`)å’Œæ’å(åˆ—`6`)æ”¾å…¥åä¸º`udata.csv`çš„æ–°æ•°æ®é›†ä¸­:

```
cat unirank.csv | cut -f4,6 -d, > udata.csv
```

æ³¨æ„é‡å®šå‘ç¬¦å·(`>`)ï¼Œå¸®åŠ©æˆ‘ä»¬ä¿å­˜è¾“å‡ºã€‚ç°åœ¨ï¼Œå¯ä»¥ä½¿ç”¨åä¸º`scatter`(å®‰è£…:`sudo pip install bashplotlib`)çš„æ•£ç‚¹å›¾å·¥å…·ç®€å•åœ°ç»˜åˆ¶è¿™äº›æ•°æ®ã€‚

```
cat udata.csv| tail -n +2 | scatter
```

æ³¨æ„`tail -n +2`åœ¨å°†è¾“å‡ºä¸€ç›´ä¼ é€’åˆ°ç»“æŸ`scatter`ä¹‹å‰ï¼Œä¸åŒ…æ‹¬ç¬¬ä¸€è¡Œï¼Œå³åˆ—æ ‡é¢˜ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå·¥å…·çš„è¾“å‡ºæ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æ˜¾ç¤ºä»»ä½•`x,y` - axes å›¾ä¾‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†æ•°æ®(`udata.csv`)ä¸Šä¼ åˆ°ä¸€ä¸ªåä¸º **plot.ly** çš„åœ¨çº¿å·¥å…·ä¸Šï¼Œäº§ç”Ÿäº†ä¸‹é¢è¿™å¼ æ¼‚äº®çš„æ•£ç‚¹å›¾:

![](img/41dafb1a9712b0ff42c448b9248b9f5f.png)

Output: Ranks vs. tuition: a scatterplot via **plot.ly**

ä»ä¸Šé¢çš„æƒ…èŠ‚ä¸éš¾ç†è§£ï¼Œæ’åé«˜çš„å¤§å­¦å­¦è´¹æ›´é«˜ï¼ç„¶è€Œï¼Œæ•£ç‚¹å›¾ä¹Ÿæè¿°äº†ä¸€æ‰€å¤§å­¦(**æ¨ç™¾ç¿°å¤§å­¦-Provo**)æ’åæ›´é«˜(æ’å=68)ï¼Œå­¦è´¹æä½( **$5300 ç¾å…ƒ/å¹´**)ã€‚è¿™æ˜¯æ•°æ®é›†ä¸­çš„å¼‚å¸¸(å¼‚å¸¸å€¼)å—ï¼Ÿæˆ‘ä»¬æŠŠè¿™ä¸ªé—®é¢˜ç•™ç»™ä½ è¿›ä¸€æ­¥è°ƒæŸ¥ï¼

# æ‘˜è¦

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šä½¿ç”¨ä¸€äº›é‡è¦çš„ bash å‘½ä»¤ï¼Œå¦‚`head`ã€`tail`ã€`sort`ã€`uniq`ã€`cut`ç­‰ã€‚åœ¨ä¸Šä¸‹æ–‡ä¸­æŒ–æ˜ç”±ç¾å›½å­¦æœ¯æœºæ„æ’åç»„æˆçš„ csv æ ¼å¼çš„ç©å…·æ•°æ®é›†ã€‚

å‚è§å‰é¢å‡ ä¸ªéƒ¨åˆ†: [**ç¬¬ä¸€éƒ¨åˆ†**](https://medium.com/towards-data-science/how-to-analyze-us-university-ranks-2017-with-bash-part-i-data-preview-e39b8f2ffee9)[**ç¬¬äºŒéƒ¨åˆ†**](https://medium.com/towards-data-science/finding-the-percent-of-colleges-in-the-us-university-ranks-2017-at-the-command-line-part-ii-grep-5db6d59f76a1) [ğŸš¶](https://apps.timwhitlock.info/emoji/tables/unicode#emoji-modal)

[è¯¥é¡¹ç›®æ˜¯'[å­¦ä¹ åœ¨ Bash Shell å’Œ Linux ä¸­åˆ†ææ•°æ®](https://www.scientificprogramming.io/learn-bash/)è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚]

# ç›¸å…³ä½œå“

[](https://www.scientificprogramming.io/learn-bash/) [## å­¦ä¹ åœ¨ Bash Shell å’Œ Linux ä¸­åˆ†ææ•°æ®â€”â€”å­¦ä¹ ç§‘å­¦ç¼–ç¨‹

### ä¸€ä¸ªç®€å•çš„è¯¾ç¨‹æ¼”ç¤ºäº† Bash shell åœ¨å¤„ç†çœŸå®æ•°æ®é›†æ—¶çš„ä½¿ç”¨

www . scientific ç¼–ç¨‹. io](https://www.scientificprogramming.io/learn-bash/)