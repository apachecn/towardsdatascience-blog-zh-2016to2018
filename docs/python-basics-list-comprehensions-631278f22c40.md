# Python åŸºç¡€:åˆ—è¡¨ç†è§£

> åŸæ–‡ï¼š<https://towardsdatascience.com/python-basics-list-comprehensions-631278f22c40?source=collection_archive---------1----------------------->

![](img/7e6444611b6eb54b9172b1e14c82929c.png)![](img/bc902edb89c2bc5429d2efa425f2864b.png)

é˜…è¯»æœ¬æ–‡åï¼Œæ‚¨å°†äº†è§£åˆ°:

*   Python ä¸­çš„**åˆ—è¡¨ç†è§£**æ˜¯ä»€ä¹ˆ
*   ä»€ä¹ˆæ˜¯**é›†åˆ** **ç†è§£**å’Œ**å­—å…¸ç†è§£**

# ä»€ä¹ˆæ˜¯åˆ—è¡¨ç†è§£ï¼Ÿ

**List comprehensions** ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª**ç®€å•çš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåŸºäºä¸€äº› **iterable** çš„åˆ—è¡¨**ã€‚åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œæ¥è‡ª iterable çš„å…ƒç´ å¯ä»¥**æœ‰æ¡ä»¶åœ°**åŒ…å«åœ¨æ–°åˆ—è¡¨ä¸­ï¼Œå¹¶æ ¹æ®éœ€è¦**è½¬æ¢**ã€‚

ä¸€ä¸ª**å¯è¿­ä»£**æ˜¯**ä½ å¯ä»¥åœ¨**ä¸Šå¾ªç¯çš„ä¸œè¥¿ã€‚å¦‚æœä½ æƒ³è¦æ›´è¯¦ç»†çš„è§£é‡Šï¼Œä½ å¯ä»¥é˜…è¯»æˆ‘ä¹‹å‰çš„åšå®¢æ–‡ç« ã€‚

åˆ—è¡¨ç†è§£çš„ç»„æˆéƒ¨åˆ†åŒ…æ‹¬:

*   **è¾“å‡ºè¡¨è¾¾å¼** ( **å¯é€‰**)
*   **å¯è¿­ä»£**
*   **è¿­ä»£å™¨å˜é‡**ï¼Œä»£è¡¨å¯è¿­ä»£å¯¹è±¡çš„æˆå‘˜

![](img/a1374f7df0f639f845e19007ef7344a3.png)

## ä¾‹å­

è¾“å‡º:

```
[1, 4, 9, 16, 25]
```

æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºæ›´é«˜çº§çš„åˆ—è¡¨ç†è§£ï¼Œå…¶ä¸­åŒ…æ‹¬åœ¨ **iterable** ä¸Šçš„**æ¡ä»¶è¯­å¥**ã€‚

![](img/01e77764edf5e8d0dd2d2254d42102b8.png)

## ä¾‹å­

è¾“å‡º:

```
[9, 16, 25]
```

# åˆ—è¡¨ç†è§£ vs å¾ªç¯

åˆ—è¡¨ç†è§£åœ¨è®¡ç®—ä¸Š**ä»¥åŠåœ¨ç¼–ç ç©ºé—´å’Œæ—¶é—´ä¸Š**éƒ½æ¯”å¾ªç¯`for`æ›´æœ‰æ•ˆã€‚é€šå¸¸ï¼Œå®ƒä»¬æ˜¯ç”¨å•è¡Œä»£ç ç¼–å†™çš„ã€‚****

****è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ä¸€ä¸ª`for`å¾ªç¯å¾—åˆ°ä¸ä¸Šä¸€ä¸ªä¾‹å­ç›¸åŒçš„ç»“æœè¿˜éœ€è¦å¤šå°‘ç©ºé—´ã€‚****

****æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œä¸Šé¢çš„åˆ—è¡¨ç†è§£è¦å®¹æ˜“å¾—å¤šã€‚ä½†æ˜¯ï¼Œè¯·è®°ä½:****

> ****æ¯ä¸ªåˆ—è¡¨ç†è§£éƒ½å¯ä»¥é‡å†™ä¸º for å¾ªç¯ï¼Œä½†ä¸æ˜¯æ¯ä¸ª for å¾ªç¯éƒ½å¯ä»¥é‡å†™ä¸ºåˆ—è¡¨ç†è§£ã€‚****

****æ¥æº:[https://trey hunner . com/2015/12/python-list-comprehensions-now-in-color/](https://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/)****

****è®¡ç®—é€Ÿåº¦å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`timeit`åº“æ¥æ¯”è¾ƒ`for`å¾ªç¯çš„é€Ÿåº¦å’Œåˆ—è¡¨ç†è§£çš„é€Ÿåº¦ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨`number`å‚æ•°ä¼ é€’æ‰§è¡Œçš„æ•°é‡ã€‚æˆ‘ä»¬å°†è¿™ä¸ªå‚æ•°è®¾ç½®ä¸º 100 ä¸‡ã€‚****

****è¾“å‡º:****

```
**6.255051373276501
3.7140220287915326**
```

****æˆ‘å·²ç»åœ¨æˆ‘çš„æœºå™¨ä¸Šè¿è¡Œè¿‡äº†ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¾—åˆ°ä¸åŒçš„ç»“æœã€‚ç„¶è€Œï¼Œåˆ—è¡¨ç†è§£çš„å®ç°åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šæ›´å¿«ã€‚****

# ****åˆ—è¡¨ç†è§£ä¸æ˜ å°„å’Œè¿‡æ»¤****

****åˆ—è¡¨ç†è§£æ˜¯ä»å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ [Haskell](http://haskell.org/) å€Ÿç”¨æ¥çš„ç®€æ´ç¬¦å·ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬çœ‹ä½œæ˜¯`filter`å’Œ`map`å‡½æ•°çš„è¯­æ³•ç³–ã€‚****

****æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œåˆ—è¡¨ç†è§£å¯ä»¥å¾ˆå¥½åœ°æ›¿ä»£`for`å¾ªç¯ï¼Œå› ä¸ºå®ƒä»¬æ›´ç´§å‡‘ã€æ›´å¿«ã€‚****

## ****Î»å‡½æ•°****

****Lambda å‡½æ•°æ˜¯å°å‹åŒ¿åå‡½æ•°ã€‚å®ƒä»¬å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ã€‚****

****å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œlambda å‡½æ•°æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°çš„ï¼Œè¿™äº›å‡½æ•°éœ€è¦ä¸€ä¸ªå‡½æ•°å¯¹è±¡ä½œä¸ºå®ƒä»¬çš„å‚æ•°ä¹‹ä¸€ï¼Œæ¯”å¦‚`map`å’Œ`filter`ã€‚****

## ****åœ°å›¾åŠŸèƒ½****

****map å‡½æ•°è¿”å›ä¸€ä¸ª**è¿­ä»£å™¨**ï¼Œè¯¥è¿­ä»£å™¨å°†å‡½æ•°åº”ç”¨äº *iterable* çš„æ¯ä¸€é¡¹ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹åˆ—è¡¨ç†è§£ã€‚****

****è¾“å‡º:****

```
**[1, 4, 9, 16, 25]
[1, 4, 9, 16, 25]**
```

## ****è¿‡æ»¤åŠŸèƒ½****

****filter å‡½æ•°ä»ä¼ é€’çš„ ***å‡½æ•°*** è¿”å› true çš„ ***iterable*** çš„å…ƒç´ ä¸­æ„é€ ä¸€ä¸ªè¿­ä»£å™¨ã€‚åŒæ ·ï¼Œè®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹è¿‡æ»¤å‡½æ•°å’Œåˆ—è¡¨ç†è§£ã€‚****

****è¾“å‡º:****

```
**[2, 4]
[2, 4]**
```

# ****æ›´å¤æ‚çš„åˆ—è¡¨ç†è§£****

****æ­¤å¤–ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ç†è§£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ **iterable** ä¸Šæœ‰**è®¸å¤šæ¡ä»¶è¯­å¥**ã€‚****

****![](img/28e4223de9febdc3eff059c217ce82b8.png)****

****è¾“å‡º:****

```
**[6, 18]**
```

****è€Œä¸”ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨**è¾“å‡ºè¡¨è¾¾å¼**ä¸Šæœ‰ä¸€ä¸ª **if-else å­å¥**ã€‚****

****![](img/b25cba4eadc77dfc3bf5d6644ffe300e.png)****

****è¾“å‡º:****

```
**['small', 'big']**
```

# ****å¯è¯»æ€§****

****æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›åˆ—è¡¨ç†è§£å¯èƒ½éå¸¸å¤æ‚ï¼Œå¾ˆéš¾è¯»æ‡‚ã€‚Python å…è®¸åœ¨æ‹¬å·å’Œå¤§æ‹¬å·ä¹‹é—´æ¢è¡Œã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ä½¿æˆ‘ä»¬å¤æ‚çš„ç†è§£æ›´å…·å¯è¯»æ€§ã€‚****

****ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šä¸€ä¸ªä¾‹å­è½¬æ¢æˆè¿™æ ·:****

****è¾“å‡º:****

```
**['small', 'big']**
```

****ç„¶è€Œï¼Œè¦å°å¿ƒåˆ—è¡¨ç†è§£ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨`for`å¾ªç¯æ›´å¥½ã€‚å¦‚æœä½ çš„ä»£ç ä¸å¯è¯»ï¼Œæœ€å¥½ä½¿ç”¨ for å¾ªç¯ã€‚****

# ****åµŒå¥— For å¾ªç¯****

****åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åµŒå¥—çš„`for`å¾ªç¯æ¥å®Œæˆä¸€äº›ä»»åŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ—è¡¨ç†è§£æ¥è¾¾åˆ°åŒæ ·çš„ç»“æœã€‚****

****å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªçŸ©é˜µï¼Œæˆ‘ä»¬æƒ³æŠŠå®ƒå±•å¹³ã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·ç”¨ä¸¤ä¸ª`for`å¾ªç¯è½»æ¾åšåˆ°è¿™ä¸€ç‚¹:****

****è¾“å‡º:****

```
**[1, 2, 3, 4, 5, 6, 7, 8, 9]**
```

****æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**åˆ—è¡¨ç†è§£**æ¥è¾¾åˆ°åŒæ ·çš„ç»“æœã€‚
**æç¤º**:for å­å¥**çš„**é¡ºåº**ä¸åŸ for å¾ªç¯ä¸­çš„**ä¿æŒä¸å˜ã€‚****

**è¾“å‡º:**

```
[1, 2, 3, 4, 5, 6, 7, 8, 9]
```

# **åµŒå¥—åˆ—è¡¨ç†è§£**

**åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ª**çŸ©é˜µ**ã€‚æˆ‘ä»¬å¯ä»¥ç”¨**åµŒå¥—åˆ—è¡¨ç†è§£**åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™å¬èµ·æ¥æœ‰ç‚¹ç–¯ç‹‚ï¼Œä½†æ¦‚å¿µå¾ˆç®€å•ã€‚**

**ä¸€ä¸ªåˆ—è¡¨ç†è§£è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹å—ï¼Ÿå› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªåˆ—è¡¨ç†è§£æ”¾åœ¨å¦ä¸€ä¸ªåˆ—è¡¨ç†è§£çš„è¾“å‡ºè¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªçŸ©é˜µä½œä¸ºç»“æœã€‚**

**è¾“å‡º:**

```
[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]
```

> **`[range](https://docs.python.org/3/library/stdtypes.html#range)`ç±»å‹è¡¨ç¤ºä¸å¯å˜çš„æ•°å­—åºåˆ—ï¼Œé€šå¸¸ç”¨äºåœ¨`[for](https://docs.python.org/3/reference/compound_stmts.html#for)`å¾ªç¯ä¸­å¾ªç¯ç‰¹å®šçš„æ¬¡æ•°**

**æ¥æº:[https://docs.python.org/3/library/stdtypes.html#ranges](https://docs.python.org/3/library/stdtypes.html#ranges)**

# **å…¶ä»–ç†è§£**

**åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰**å­—å…¸ç†è§£**å’Œ**é›†åˆç†è§£**ã€‚æˆ‘ä»¬çœ‹åˆ°çš„æ‰€æœ‰åŸåˆ™å¯¹äºè¿™äº›ç†è§£ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€äº›éå¸¸å°çš„ç»†èŠ‚å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå­—å…¸æˆ–ä¸€å¥—ç†è§£ã€‚**

## **è¯å…¸é‡Šä¹‰**

**ä¸ºäº†åˆ›å»ºå­—å…¸ç†è§£ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ‹¬å·`[]`æ”¹ä¸ºèŠ±æ‹¬å·`{}`ã€‚å¦å¤–ï¼Œåœ¨è¾“å‡ºè¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å†’å·`:`åˆ†éš”é”®å’Œå€¼ã€‚**

**è¾“å‡º:**

```
{'beer': 2.0, 'fish': 5.0, 'apple': 1.0}
```

## **é›†åˆç†è§£**

**ä¸ºäº†åˆ›å»ºä¸€ä¸ªé›†åˆç†è§£ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ‹¬å·`[]`æ”¹ä¸ºèŠ±æ‹¬å·`{}`ã€‚**

**è¾“å‡º:**

```
{0, 1, 100, 144, 400, 900}
```

# **ç”Ÿæˆå™¨è¡¨è¾¾å¼**

**åœ¨è¿™é‡Œï¼Œæˆ‘åªæƒ³æä¸€ä¸‹ï¼ŒPython è¿˜æœ‰ä¸€ä¸ªå«**ç”Ÿæˆå™¨è¡¨è¾¾å¼**çš„ä¸œè¥¿ã€‚å®ƒä»¬ä¸åˆ—è¡¨ç†è§£éå¸¸ç›¸ä¼¼ã€‚ä¸åŒçš„æ˜¯ï¼Œå®ƒä»¬ä½¿ç”¨åœ†æ‹¬å·`().`å¹¶ä¸”ï¼Œå®ƒä»¬ä¸åœ¨å†…å­˜ä¸­å­˜å‚¨åˆ—è¡¨ã€‚ä»–ä»¬ä½¿ç”¨ [**æ‡’è¯„**](https://wiki.haskell.org/Lazy_evaluation) æ‰‹æ³•ã€‚**

> **å¦‚æœä½ ä½¿ç”¨è¿”å›æ— é™æµæˆ–å¤§é‡æ•°æ®çš„è¿­ä»£å™¨ï¼Œé‚£ä¹ˆåˆ—è¡¨ç†è§£æ˜¯æ²¡æœ‰ç”¨çš„ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼**æ›´å¯å–**ã€‚**

**æ¥æº:[https://docs.python.org/3/howto/functional.html](https://docs.python.org/3/howto/functional.html)**

**å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºç”Ÿæˆå™¨è¡¨è¾¾å¼çš„çŸ¥è¯†ï¼Œä½ å¯ä»¥æŸ¥çœ‹æˆ‘åœ¨[ä¹‹å‰çš„åšå®¢æ–‡ç« ](/python-basics-iteration-and-looping-6ca63b30835c)ã€‚**

# **æ‘˜è¦**

*   ****åˆ—è¡¨ç†è§£**ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª**ç®€å•çš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåŸºäºä¸€äº›**å¯è¿­ä»£**çš„åˆ—è¡¨**ã€‚**
*   **è¿™ç§ç†è§£æ¯”åœ¨å¾ªç¯ä¸­ä½¿ç”¨ a æ›´åŠ æœ‰æ•ˆã€‚**
*   **æˆ‘ä»¬å¯ä»¥åœ¨ç†è§£ä¸­ä½¿ç”¨æ¡ä»¶è¯­å¥ã€‚**
*   **å¯¹äºå†…ç½®çš„`map`å’Œ`filter` **å‡½æ•°**ï¼Œç†è§£æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„**é€‰æ‹©**ã€‚**
*   **æˆ‘ä»¬å¯ä»¥æœ‰åµŒå¥—çš„ç†è§£ã€‚**
*   **åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰**å­—å…¸ç†è§£**å’Œ**é›†åˆç†è§£**ã€‚**
*   **å½“æˆ‘ä»¬å¤„ç†å¤§é‡æ•°æ®çš„æ— é™æµæ—¶ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼æ›´å¥½ã€‚**

# **èµ„æº**

*   **[https://trey hunner . com/2015/12/python-list-comprehensions-now-in-color/](https://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/)**
*   **[https://www . data camp . com/community/tutorials/python-list-comprehension](https://www.datacamp.com/community/tutorials/python-list-comprehension)**
*   **[https://www.w3schools.com/python/python_lambda.asp](https://www.w3schools.com/python/python_lambda.asp)**
*   **[https://talkai . blog/2018/08/29/python IC-better-if-list-comprehension-else-map-and-filter/](https://talkai.blog/2018/08/29/pythonic-better-if-list-comprehension-else-map-and-filter/)**
*   **[https://docs.python.org/3/library/functions.html](https://docs.python.org/3/library/functions.html)T40[https://docs.python.org/3/howto/functional.html](https://docs.python.org/3/howto/functional.html)**

# **æˆ‘çš„å…¶ä»–åšå®¢æ–‡ç« **

**ä½ ä¹Ÿå¯ä»¥çœ‹çœ‹æˆ‘ä»¥å‰çš„åšæ–‡ã€‚**

*   **[Jupyter ç¬”è®°æœ¬å¿«æ·é”®](https://medium.com/@ventsislav94/jypyter-notebook-shortcuts-bf0101a98330)**
*   **[æ•°æ®ç§‘å­¦çš„ Python åŸºç¡€çŸ¥è¯†](/python-basics-for-data-science-6a6c987f2755)**
*   **[Python åŸºç¡€:è¿­ä»£ã€å¯è¿­ä»£ã€è¿­ä»£å™¨å’Œå¾ªç¯](/python-basics-iteration-and-looping-6ca63b30835c)**
*   **[Python æ•°æ®ç§‘å­¦:Matplotlib æ•°æ®å¯è§†åŒ–ç®€ä»‹](/data-science-with-python-intro-to-data-visualization-and-matplotlib-5f799b7c6d82)**
*   **[ä½¿ç”¨ Python çš„æ•°æ®ç§‘å­¦:ä½¿ç”¨ pandas åŠ è½½ã€å­é›†åŒ–å’Œè¿‡æ»¤æ•°æ®ç®€ä»‹](/data-science-with-python-intro-to-loading-and-subsetting-data-with-pandas-9f26895ddd7f)**
*   **[æ–‡æœ¬è‡ªç„¶è¯­è¨€å¤„ç†å¯¼è®º](http://Introduction to Natural Language Processing for Text)**

# **æ—¶äº‹é€šè®¯**

**å¦‚æœä½ æƒ³åœ¨æˆ‘å‘è¡¨æ–°çš„åšå®¢æ–‡ç« æ—¶å¾—åˆ°é€šçŸ¥ï¼Œä½ å¯ä»¥è®¢é˜…[æˆ‘çš„ç®€è®¯](https://buttondown.email/Ventsislav)ã€‚**

# **å•†åŠ¡åŒ–äººé™…å…³ç³»ç½‘**

**è¿™æ˜¯æˆ‘åœ¨ LinkedIn ä¸Šçš„ç®€ä»‹ï¼Œå¦‚æœä½ æƒ³å’Œæˆ‘è”ç³»çš„è¯ã€‚æˆ‘å°†å¾ˆé«˜å…´ä¸ä½ è”ç³»åœ¨ä¸€èµ·ã€‚**

# **æœ€åçš„è¯**

**è°¢è°¢ä½ çš„é˜…è¯»ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ã€‚å¦‚æœä½ å–œæ¬¢ï¼Œè¯·æŒ‰ä½æ‹æ‰‹é”®ï¼Œåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘å¾ˆé«˜å…´å¬åˆ°ä½ çš„åé¦ˆã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå°½ç®¡é—®ã€‚ğŸ˜‰**