# é€šè¿‡ç»„åˆé«˜é£é™©è‚¡ç¥¨è¿›è¡ŒæŠ•èµ„æ¥é™ä½é£é™©

> åŸæ–‡ï¼š<https://towardsdatascience.com/reducing-risk-by-building-portfolio-8772d1ce0f21?source=collection_archive---------8----------------------->

![](img/e04aed3b5d04fc080d221c65a8adb535.png)

Photo by [Nathan McBride](https://unsplash.com/@nathan_mcb?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

(è¿™ç¯‡æ–‡ç« ä¹Ÿå¯ä»¥åœ¨[æˆ‘çš„åšå®¢](https://kylelix7.github.io/)ä¸­æ‰¾åˆ°)

# é£é™©å›æŠ¥æƒè¡¡

é£é™©å’Œå›æŠ¥çš„æƒè¡¡åœ¨èµ„æœ¬ä¸»ä¹‰æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ã€‚ä½ å¯èƒ½å¬è¯´è¿‡ï¼Œå¦‚æœä½ æƒ³è¦æ›´é«˜çš„å›æŠ¥ï¼Œä½ éœ€è¦å†’æ›´å¤§çš„é£é™©ã€‚è¿™ä¼¼ä¹æ˜¯ä¸€æ¡é»„é‡‘æ³•åˆ™ã€‚ä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½å°†ä¸¤åªæˆ–æ›´å¤šçš„é«˜é£é™©è‚¡ç¥¨ç»„åˆèµ·æ¥ï¼Œå»ºç«‹ä¸€ä¸ªæŠ•èµ„ç»„åˆï¼Œä»è€Œé™ä½é£é™©ï¼Œä½†ä¸ä¼šæ˜¾è‘—é™ä½å›æŠ¥ã€‚

åœ¨é‡‘èé¢†åŸŸï¼Œé£é™©åŒ…æ‹¬æŠ•èµ„çš„å®é™…å›æŠ¥ä¸é¢„æœŸå›æŠ¥ä¸åŒçš„å¯èƒ½æ€§ã€‚å› æ­¤ï¼Œé£é™©é€šå¸¸ç”¨å†å²ä»·æ ¼çš„æ ‡å‡†å·®æ¥è¡¡é‡ã€‚å®ƒæœ‰æ—¶è¢«ç§°ä¸ºæ³¢åŠ¨æ€§ã€‚æ ‡å‡†å·®è¶Šé«˜æ„å‘³ç€é£é™©è¶Šé«˜ã€‚

ä¸ºäº†æ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ç¼–å†™äº†ä¸¤å¥—äººå·¥è‚¡ç¥¨ä»·æ ¼ã€‚ä»·æ ¼ä¹Ÿæœ‰ç›¸åŒçš„è¶‹åŠ¿ã€‚åŒæ ·ï¼Œä¸€ä¸ªæŠ•èµ„ç»„åˆç”± 50%çš„è‚¡ç¥¨ 1 å’Œ 50%çš„è‚¡ç¥¨ 2 ç»„æˆ(å¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ªç¯å¢ƒè®¾ç½®ï¼ŒæŸ¥çœ‹è¿™ç¯‡[æ–‡ç« ](https://medium.com/@kyle.jinhai.li/collect-trading-data-with-pandas-library-8904659f2122)ä¸­çš„æ­¥éª¤ 1)ã€‚

```
**import** pandas **as** pd
**import** numpy **as** np
**import** matplotlib.pyplot **as** plt

periods = 252
noise = np.random.rand(252)
rng = pd.date_range(**'1/1/2011'**, periods=periods, freq=**'D'**)
*# Artificially build two stock stock 1 and stock 2* stk1 = (np.arange(1, 1+(.001)*(periods), .001)) * 30 + noise
stk2 = (np.arange(1, 1+(.001)*(periods), .001)) * 30 - noise

*# Build a porfolio with stock 1 and stock 2 weighted 50% respectively* portfolio = .5 * stk1 + .5 * stk2
df = pd.DataFrame(index=rng, data={**'STK1'**: stk1, **'STK2'**: stk2, **'PORTFOLIO'**: portfolio})
print(df.head())
```

æ•°æ®å¸§çš„è¾“å‡º

```
 PORTFOLIO       STK1       STK2
2011-01-01      30.00      30.661445  29.338555
2011-01-02      30.03      30.355423  29.704577
2011-01-03      30.06      30.098417  30.021583
2011-01-04      30.09      30.749702  29.430298
2011-01-05      30.12      30.156122  30.083878
...
```

ç»˜åˆ¶å•ä¸ªè‚¡ç¥¨ä»·æ ¼å’ŒæŠ•èµ„ç»„åˆä»·å€¼

```
ax = df.plot(title=**'Stock Price'**)
ax.set_xlabel(**'date'**)
ax.set_ylabel(**'close price'**)
ax.grid()
plt.show()
```

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­çœ‹åˆ°çš„ï¼Œè‚¡ç¥¨ 1 å’Œè‚¡ç¥¨ 2 å…¨å¹´éƒ½åœ¨ä¸Šæ¶¨ï¼Œä»å¤§çº¦ 30 æ¶¨åˆ°å¤§çº¦ 37ã€‚ä»·æ ¼åœ¨ç±»ä¼¼èŒƒå›´å†…åç¦»é¢„æœŸå€¼(å› ä¸ºæ·»åŠ äº†å™ªå£°)ã€‚ä½†æ€»ä½“è¶‹åŠ¿æ˜¯ä¸Šå‡çš„ã€‚è¿™ä¹Ÿè¡¨æ˜è‚¡ç¥¨ 1 å’Œè‚¡ç¥¨ 2 å…·æœ‰ç›¸ä¼¼çš„é£é™©æ°´å¹³ã€‚ç„¶è€Œï¼ŒæŠ•èµ„ç»„åˆçš„ä»·å€¼ä¸æ–­ä¸Šå‡ï¼Œæ²¡æœ‰æ³¢åŠ¨ã€‚ä»å›æŠ¥çš„è§’åº¦æ¥çœ‹ï¼ŒæŠ•èµ„ç»„åˆçš„æœ€ç»ˆä»·å€¼çº¦ä¸º 37 è‹±é•‘ï¼Œäº§ç”Ÿäº†ç±»ä¼¼çš„å›æŠ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†ä¸¤åªé£é™©è¾ƒé«˜çš„è‚¡ç¥¨ç»„åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªé£é™©è¾ƒä½çš„æŠ•èµ„ç»„åˆï¼Œå¹¶è·å¾—ç›¸åŒæ°´å¹³çš„å›æŠ¥ã€‚

![](img/54218c5c1995112310070d883eb641a8.png)

# ä¸ºä»€ä¹ˆï¼Ÿ

å¦‚æœæˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿™ä¸¤åªè‚¡ç¥¨çš„æ³¢åŠ¨è¿åŠ¨ï¼Œä»ä»£ç æˆ–å›¾å½¢ã€‚å½“è‚¡ç¥¨ 1 å‘ä¸Šåç¦»æ—¶ï¼Œè‚¡ç¥¨ 2 å‘ä¸‹åç¦»ç›¸åŒçš„å€¼ã€‚è¿™ä½¿å¾—ä¸¤åªè‚¡ç¥¨çš„é£é™©ç›¸äº’æŠµæ¶ˆã€‚å› æ­¤ï¼Œå®ƒä¼šäº§ç”Ÿä¸€æ¡å¹³æ»‘(é£é™©è¾ƒå°)çš„çº¿ã€‚

# ç¥å¥‡ä¹‹å¤„â€”â€”æ•°å­¦

æˆ‘ä»¬å¦‚ä½•åœ¨æ•°å­¦ä¸­è¡¡é‡è¿™ç§æ³¢åŠ¨å…³ç³»ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒæ¥ç¼–å†™ä»£ç ï¼Œæ‰¾å‡ºç°å®ä¸–ç•Œä¸­ç°æœ‰çš„è‚¡ç¥¨ã€‚å¯ä»¥ç”¨è‚¡ç¥¨æ—¥æ”¶ç›Šç‡çš„**ç›¸å…³ç³»æ•°**(ä¸æ˜¯åæ–¹å·®)æ¥è¡¡é‡ã€‚

ä»[æŠ•èµ„åª’ä½“](https://www.investopedia.com/terms/c/correlationcoefficient.asp)ï¼Œ

> ç›¸å…³ç³»æ•°æ˜¯ç¡®å®šä¸¤ä¸ªå˜é‡è¿åŠ¨ç›¸å…³ç¨‹åº¦çš„ä¸€ç§åº¦é‡ã€‚ç›¸å…³ç³»æ•°çš„å€¼èŒƒå›´æ˜¯-1.0 åˆ° 1.0ã€‚å¦‚æœè®¡ç®—å‡ºçš„ç›¸å…³æ€§å¤§äº 1.0 æˆ–å°äº-1.0ï¼Œåˆ™è¡¨æ˜å‡ºç°äº†é”™è¯¯ã€‚ç›¸å…³æ€§ä¸º-1.0 è¡¨ç¤ºå®Œå…¨è´Ÿç›¸å…³ï¼Œè€Œç›¸å…³æ€§ä¸º 1.0 è¡¨ç¤ºå®Œå…¨æ­£ç›¸å…³ã€‚

![](img/4f067c37cca8599699259553aae697ef.png)

è¦å°†å…¶è½¬æ¢ä¸ºä»£ç ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®¡ç®—ä¸¤åªè‚¡ç¥¨çš„æ—¥æ”¶ç›Šç‡ã€‚æ¯æ—¥å›æŠ¥è®¡ç®—ç®€å•å¦‚

æ¯æ—¥å›æŠ¥=ä»·æ ¼ _t1 /ä»·æ ¼ _t0 - 1

ä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ¯æ—¥æ”¶ç›Šï¼Œå°±å¯ä»¥ç”¨ä¸€è¡Œä»£ç è®¡ç®—ç›¸å…³ç³»æ•°ğŸ¼

```
daily_return = (df / df.shift(1) - 1).dropna()
print(**"daily_return\n"**, daily_return.head())
corr = daily_return.corr()
print(**"corr: "**, corr)
```

ä¸ºäº†éªŒè¯ï¼Œæˆ‘ä»¬æ‰“å°äº†ç›¸å…³ç³»æ•°ã€‚ç»“æœè¯æ˜ï¼Œè‚¡ç¥¨ 1 å’Œè‚¡ç¥¨ 2 çš„æ—¥æ”¶ç›Šç‡ä¸º-0.999787ï¼Œè¡¨æ˜æ—¥æ”¶ç›Šç‡åå‘å˜åŠ¨ã€‚

```
daily_return             
             PORTFOLIO      STK1      STK2
2011-01-02   0.001000 -0.009390  0.011869
2011-01-03   0.000999 -0.008664  0.010894
2011-01-04   0.000998  0.019264 -0.017346
2011-01-05   0.000997  0.011912 -0.010373
2011-01-06   0.000996 -0.025108  0.028800corr:      PORTFOLIO      STK1      STK2
PORTFOLIO   1.000000  0.012499 -0.000667
STK1        0.012499  1.000000 -0.999787
STK2       -0.000667 -0.999787  1.000000
```

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç›¸å…³ç³»æ•°æ¥å‘ç°ç°å®ä¸–ç•Œä¸­çš„è‚¡ç¥¨ï¼Œä»¥ä¼˜åŒ–æŠ•èµ„ç»„åˆã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºæœºå™¨å­¦ä¹ çš„çŸ¥è¯†ï¼Œeducative.io ä¸­æœ‰ä¸€ç³»åˆ—[è¯¾ç¨‹å¾ˆæœ‰å¸®åŠ©ã€‚è¿™äº›è¯¾ç¨‹åŒ…æ‹¬åƒåŸºæœ¬çš„ MLï¼ŒNLPï¼Œå›¾åƒè¯†åˆ«ç­‰ä¸»é¢˜ã€‚](https://www.educative.io/profile/view/6083138522447872?aff=VEzk)

***æ¥è‡ªã€Šèµ°å‘æ•°æ®ç§‘å­¦ã€‹ç¼–è¾‘çš„æç¤º:*** *è™½ç„¶æˆ‘ä»¬å…è®¸ç‹¬ç«‹ä½œè€…æ ¹æ®æˆ‘ä»¬çš„* [*è§„åˆ™å’ŒæŒ‡å¯¼æ–¹é’ˆ*](/questions-96667b06af5) *å‘è¡¨æ–‡ç« ï¼Œä½†æˆ‘ä»¬ä¸è®¤å¯æ¯ä¸ªä½œè€…çš„è´¡çŒ®ã€‚ä½ ä¸åº”è¯¥åœ¨æ²¡æœ‰å¯»æ±‚ä¸“ä¸šå»ºè®®çš„æƒ…å†µä¸‹ä¾èµ–ä¸€ä¸ªä½œè€…çš„ä½œå“ã€‚è¯¦è§æˆ‘ä»¬çš„* [*è¯»è€…æœ¯è¯­*](/readers-terms-b5d780a700a4) *ã€‚*

æ¨èé˜…è¯»:

[åŠ¨æ‰‹æœºå™¨å­¦ä¹ ](https://www.amazon.com/gp/product/1492032646/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1492032646&linkCode=as2&tag=blog023b-20&linkId=e6994d31d10e7ac4d35d9889cfe5622e)

[ç”¨äºæ•°æ®åˆ†æçš„ Python:ä¸ Pandasã€NumPy å’Œ IPython çš„æ•°æ®äº‰è®º](https://www.amazon.com/gp/product/1491957662/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491957662&linkCode=as2&tag=blog023b-20&linkId=be0bbd6ab4fd578397d9c14facc76911)

[å¯¹å†²åŸºé‡‘çœŸæ­£åœ¨åšä»€ä¹ˆ](https://www.amazon.com/gp/product/1631570897/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1631570897&linkCode=as2&tag=blog023b-20&linkId=d7bb68173b008df1b500073e3a8d054e)

æˆ‘çš„å¸–å­:

[æˆ‘å…³äº FAANG è®¿è°ˆçš„å¸–å­](https://medium.com/@fin.techology/my-posts-about-faang-interview-20e529c5f13f?source=your_stories_page---------------------------)

[æˆ‘çš„ YouTube é¢‘é“](https://bit.ly/3bBOjtJ)

[æˆ‘å…³äºé‡‘èå’Œç§‘æŠ€çš„å¸–å­](https://medium.com/@fin.techology/my-posts-about-finance-and-tech-7b7e6b2e57f4?source=your_stories_page---------------------------)

[ä» CRUD web åº”ç”¨å¼€å‘åˆ°è¯­éŸ³åŠ©æ‰‹ä¸­çš„ SDEâ€”â€”æˆ‘æ­£åœ¨è¿›è¡Œçš„æœºå™¨å­¦ä¹ ä¹‹æ—…](https://medium.com/@fin.techology/from-crud-app-dev-to-sde-in-voice-assistant-my-ongoing-journey-to-ml-4ea11ec4966e?)

[å…¨æ ˆå¼€å‘æ•™ç¨‹:å°† AWS Lambda æ— æœåŠ¡å™¨æœåŠ¡é›†æˆåˆ° Angular SPA ä¸­](/full-stack-development-tutorial-integrate-aws-lambda-serverless-service-into-angular-spa-abb70bcf417f)

[å…¨æ ˆå¼€å‘æ•™ç¨‹:ç”¨è¿è¡Œåœ¨ AWS Lambda ä¸Šçš„æ— æœåŠ¡å™¨ REST API æä¾›äº¤æ˜“æ•°æ®](/full-stack-development-tutorial-serverless-rest-api-running-on-aws-lambda-a9a501f54405)

[å…¨æ ˆå¼€å‘æ•™ç¨‹:åœ¨ Angular SPA ä¸Šå¯è§†åŒ–äº¤æ˜“æ•°æ®(1)](/full-stack-development-tutorial-visualize-trading-data-on-angular-spa-7ec2a5749a38)

[å¼ºåŒ–å­¦ä¹ :Q å­¦ä¹ ç®€ä»‹](https://medium.com/@kyle.jinhai.li/reinforcement-learning-introduction-to-q-learning-444c951e292c)