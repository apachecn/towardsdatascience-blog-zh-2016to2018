# Javascript ä¸­çš„ä½œç”¨åŸŸ

> åŸæ–‡ï¼š<https://towardsdatascience.com/still-confused-in-js-scopes-f7dae62c16ee?source=collection_archive---------8----------------------->

![](img/25300581ec324633a0b6e2c57d6cfd7a.png)

Photo by [sergio souza](https://unsplash.com/@serjosoza?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

> å¦‚æœæ‚¨æ­£åœ¨å­¦ä¹  javascriptï¼Œæˆ–è€…å¯¹è¾“å‡ºé—®é¢˜æ„Ÿåˆ°å›°æƒ‘ï¼Œç”šè‡³éš¾ä»¥ç†è§£ javascript çš„å…¶ä»–æ ¸å¿ƒæ¦‚å¿µï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°†ä¼šæœ‰æ‰€å¸®åŠ©ã€‚

## ä»€ä¹ˆæ˜¯ç¤ºæ³¢å™¨ï¼Ÿ

èŒƒå›´æ˜¯è¿è¡Œæ—¶ä»£ç ä¸­æŸä¸ªç‰¹å®šéƒ¨åˆ†çš„å˜é‡ã€å‡½æ•°æˆ–å¯¹è±¡çš„å¯è®¿é—®æ€§ã€‚

å½“æœ€å°ç‰¹æƒçš„[åŸåˆ™](https://en.wikipedia.org/wiki/Principle_of_least_privilege)åº”ç”¨äºç¼–ç¨‹è¯­è¨€è®¾è®¡æ—¶ï¼Œå®ƒä»¬å°±å‡ºç°äº†ã€‚

## æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦å®ƒå‘¢ï¼Ÿ

å®ƒä»¬ä¸ºä½ çš„ä»£ç æä¾›äº†ä¸€å®šç¨‹åº¦çš„å®‰å…¨æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰ä½¿ç”¨å®ƒä»¬ã€‚

ç•Œå®šä»£ç çš„èŒƒå›´æœ‰åŠ©äºæé«˜æ•ˆç‡ï¼Œè·Ÿè¸ªå’Œå‡å°‘é”™è¯¯ã€‚

å®ƒè¿˜è§£å†³äº†ä¸åŒä½œç”¨åŸŸä¸­åŒåå˜é‡çš„å‘½åé—®é¢˜ï¼Œå› æ­¤å‡å°‘äº†å‘½åç©ºé—´å†²çªã€‚

## èŒƒå›´çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ

1.  å…¨çƒå’Œæœ¬åœ°
2.  è¯æ±‡çš„
3.  è¡—åŒº
4.  å…¬å…±å’Œç§äºº

è®©æˆ‘ä»¬ç”¨å®ä¾‹é€ä¸€æŸ¥çœ‹å®ƒä»¬ã€‚

## å…¨å±€èŒƒå›´å’Œå±€éƒ¨èŒƒå›´

ä»»ä½•åœ¨å‡½æ•°å¤–éƒ¨å£°æ˜çš„å˜é‡éƒ½å±äºå…¨å±€èŒƒå›´ï¼Œå› æ­¤å¯ä»¥ä»ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹è®¿é—®å’Œä¿®æ”¹ã€‚

å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡åœ¨å±€éƒ¨èŒƒå›´å†…ã€‚å¯¹äºè¯¥å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨ï¼Œå®ƒä»¬éƒ½æœ‰ä¸åŒçš„ä½œç”¨åŸŸã€‚è¿™æ„å‘³ç€åŒåçš„å˜é‡å¯ä»¥åœ¨ä¸åŒçš„å‡½æ•°ä¸­ä½¿ç”¨ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›å˜é‡è¢«ç»‘å®šåˆ°å®ƒä»¬å„è‡ªçš„å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸åŒçš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”ä¸èƒ½åœ¨å…¶ä»–å‡½æ•°ä¸­è®¿é—®ã€‚

æ–°å‡½æ•°=æ–°çš„å±€éƒ¨èŒƒå›´â€”â€”è¿™æ˜¯è§„åˆ™ã€‚

```
// Gobal
var mouse = "Mouse";function test1() {
  // Local
  var name = "Cat";
  console.log(name);
}function test2() {
  // Local
  var name = "Dog";
  console.log(name);
}test1();
test2();console.log(name);
```

## è¯æ±‡èŒƒå›´

å½“ä¸€ä¸ªå‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­æ—¶ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„ä½œç”¨åŸŸï¼Œè¿™ç§°ä¸ºè¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿç§°ä¸ºé™æ€ä½œç”¨åŸŸï¼Œå› ä¸ºå®ƒå¯èƒ½åªåœ¨å®šä¹‰å®ƒçš„ä»£ç å—ä¸­è¢«*è°ƒç”¨*(å¼•ç”¨)ã€‚

![](img/5069b1d984c749546b13f7319972324f.png)

Lexical scope

JavaScript ä»æœ€é‡Œé¢çš„èŒƒå›´å¼€å§‹å‘å¤–æœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°å®ƒè¦å¯»æ‰¾çš„å˜é‡/å¯¹è±¡/å‡½æ•°ã€‚

> éœ€è¦è®°ä½çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œè¯æ³•ä½œç”¨åŸŸå¹¶ä¸å‘åå·¥ä½œ*è€Œä¸æ˜¯*ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½è®¿é—® SocialMedia å‡½æ•°å’Œ Platform å‡½æ•°ä¸­çš„æ³¨é‡Šå˜é‡ã€‚

## å—èŒƒå›´

åƒ`if`å’Œ`switch`æ¡ä»¶æˆ–è€…`for`å’Œ`while`å¾ªç¯å’Œ{}ä¸åƒå‡½æ•°è¿™æ ·çš„å—è¯­å¥ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ä½œç”¨åŸŸã€‚block è¯­å¥ä¸­å®šä¹‰çš„å˜é‡å°†ä¿ç•™åœ¨å®ƒä»¬åŸæ¥æ‰€åœ¨çš„èŒƒå›´å†…ã€‚

```
// Gobal
var name = "Mouse";{
  // Local
  var name = "Cat";
  console.log(name); // Cat
}console.log(name); // Mouse
```

è®©æˆ‘ä»¬çœ‹çœ‹å›´ç»•å®ƒçš„ä¸€ä¸ªé¢è¯•é—®é¢˜(æ‰§è¡Œä¸Šä¸‹æ–‡ã€é—­åŒ…å’ŒèŒƒå›´çš„æ··åˆ)

```
for (var i = 0; i < 3; i++) {
  setTimeout(function() { console.log(i); }, 1000 + i);
}
```

æ¯æ¬¡åˆ†é…ç›¸åŒçš„å˜é‡å€¼æ—¶ï¼Œä¸Šé¢å°†è¾“å‡º 3ï¼Œ3ï¼Œ3ã€‚

> åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œconsole.log(i)å°†è¢«æ·»åŠ åˆ°å †æ ˆä¸­ï¼Œäº‹ä»¶å¾ªç¯æ£€æµ‹åˆ°å®ƒæœ‰å»¶è¿Ÿï¼Œå®ƒè¢«å‘é€åˆ°äº‹ä»¶é˜Ÿåˆ—ï¼Œè¿™ç§æƒ…å†µåˆå‘ç”Ÿäº† 2 æ¬¡ï¼Œæœ€åå½“äº‹ä»¶å¾ªç¯å¼€å§‹ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æŒ‘é€‰å®ƒä»¬æ¥æ‰§è¡Œæ—¶ï¼Œç”±äºæœ€åçš„ i++çš„ç¼˜æ•…ï¼Œå˜é‡ I çš„æœ€ç»ˆå€¼æ˜¯ 3ï¼Œå¹¶ä¸”ç”±äºå˜é‡çš„èŒƒå›´æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å½“å®ƒè¿”å›æ—¶ï¼Œæ¯ä¸ªå˜é‡çš„å€¼éƒ½å˜æˆ 3ã€‚

ç„¶è€Œï¼ŒECMAScript 6 å¼•å…¥äº†`let`å’Œ`const`å…³é”®å­—ã€‚è¿™äº›å…³é”®å­—å¯ä»¥ç”¨æ¥ä»£æ›¿`var`å…³é”®å­—ï¼Œè€Œ`let`å’Œ`const`å…³é”®å­—æ”¯æŒåœ¨å—è¯­å¥ä¸­å£°æ˜å±€éƒ¨ä½œç”¨åŸŸã€‚

å¦‚æœæˆ‘ä»¬æŠŠ var i æ”¹æˆ let iï¼Œç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹åŒºåˆ«ã€‚

```
for (let i = 0; i < 3; i++) {
  setTimeout(function() { console.log(i); }, 1000 + i);
}
```

æ¯å½“åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡èŒƒå›´æ—¶ï¼Œä¸Šé¢çš„å‡½æ•°å°†è¾“å‡º 0ï¼Œ1ï¼Œ2ã€‚

## å…¬å…±å’Œç§æœ‰èŒƒå›´

ä»å…¬å…±(å…¨å±€)èŒƒå›´åŒ…è£…å‡½æ•°ä½¿å®ƒä»¬å…å—æ˜“å—æ”»å‡»çš„æ”»å‡»ã€‚ä½†æ˜¯åœ¨ JavaScript ä¸­ï¼Œæ²¡æœ‰å…¬å…±æˆ–ç§æœ‰èŒƒå›´è¿™ç§ä¸œè¥¿ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡ä»¿ä»–ä»¬ã€‚

```
(function () {   
    var test = function () {
     // do some stuff here   
    }; 
})(); 
// The parenthesis at the end of the function tells the interpreter to execute it as soon as it reads it without invocation.test(); // Uncaught ReferenceError
```

ç§°ä¸ºæ¨¡å—æ¨¡å¼çš„è®¾è®¡æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºè¿™æ ·çš„åŠŸèƒ½ã€‚

![](img/8f8b4f8f0c09b84dde644ed58eb881ac.png)

Private and public scopes in javascript

> modulePattern çš„ return è¯­å¥åŒ…å«æˆ‘ä»¬çš„å…¬å…±å‡½æ•°ã€‚ç§æœ‰å‡½æ•°åªæ˜¯é‚£äº›ä¸è¢«è¿”å›çš„å‡½æ•°ã€‚ä¸è¿”å›å‡½æ•°ä¼šä½¿å®ƒä»¬åœ¨ modulePattern åç§°ç©ºé—´ä¹‹å¤–ä¸å¯è®¿é—®ã€‚ä½†æ˜¯æˆ‘ä»¬çš„å…¬å…±å‡½æ•°å¯ä»¥è®¿é—®æˆ‘ä»¬çš„ç§æœ‰å‡½æ•°ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯¹äºè¾…åŠ©å‡½æ•°æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚

ä¸‹ä¸€ç¯‡æ–‡ç« å°†è®¨è®ºä»€ä¹ˆæ˜¯ javascript ä¸Šä¸‹æ–‡å’Œå…³äºä½œç”¨åŸŸçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

å¦‚æœæ‚¨æƒ³è¢«æ·»åŠ åˆ°æˆ‘çš„ç”µå­é‚®ä»¶åˆ—è¡¨ä¸­ï¼Œè¯·è€ƒè™‘åœ¨æ­¤è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€[](https://goo.gl/forms/MOPINWoY7q1f1APu2)****å…³æ³¨æˆ‘çš„**[**medium**](https://medium.com/@ideepak.jsd)**é˜…è¯»æ›´å¤šå…³äº javascript çš„æ–‡ç« ï¼Œå¹¶å…³æ³¨**[**github**](https://github.com/dg92)**æŸ¥çœ‹æˆ‘çš„ç–¯ç‹‚ä»£ç **ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸æ¸…æ¥šæˆ–è€…ä½ æƒ³æŒ‡å‡ºä»€ä¹ˆï¼Œè¯·åœ¨ä¸‹é¢è¯„è®ºã€‚**

**ä½ å¯èƒ½ä¹Ÿä¼šå–œæ¬¢æˆ‘çš„å…¶ä»–æ–‡ç« **

1.  **[Javascript æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæå‡](https://levelup.gitconnected.com/javascript-execution-context-and-hoisting-c2cc4993e37d)**
2.  **[Javascript â€”ç”Ÿæˆå™¨-äº§å‡º/ä¸‹ä¸€ä¸ª&å¼‚æ­¥-ç­‰å¾…ğŸ¤”](https://medium.com/datadriveninvestor/javascript-generator-yield-next-async-await-8442d2c77185)**
3.  **[ç†è§£ Javascriptâ€˜thisâ€™å…³é”®å­—(ä¸Šä¸‹æ–‡)](https://medium.com/datadriveninvestor/javascript-context-this-keyword-9a78a19d5786)ã€‚**
4.  **[å¸¦æœ‰æ˜ å°„ã€å½’çº¦ã€è¿‡æ»¤çš„ Javascript æ•°æ®ç»“æ„](https://levelup.gitconnected.com/write-beautiful-javascript-with-%CE%BB-fp-es6-350cd64ab5bf)**
5.  **[Javascript- Currying VS éƒ¨åˆ†åº”ç”¨](https://medium.com/datadriveninvestor/javascript-currying-vs-partial-application-4db5b2442be8)**
6.  **[Javascript ES6 â€”å¯è¿­ä»£ç¨‹åºå’Œè¿­ä»£å™¨](https://medium.com/datadriveninvestor/javascript-es6-iterables-and-iterators-de18b54f4d4)**
7.  **[Javascript â€”ä»£ç†](https://medium.com/datadriveninvestor/why-to-use-javascript-proxy-5cdc69d943e3)ï¼Œ [Javascript â€”ä½œç”¨åŸŸ](https://medium.com/datadriveninvestor/still-confused-in-js-scopes-f7dae62c16ee)**

## **å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·éšæ„åˆ†äº«å¹¶å¸®åŠ©ä»–äººæ‰¾åˆ°å®ƒï¼**

****è°¢è°¢ï¼****